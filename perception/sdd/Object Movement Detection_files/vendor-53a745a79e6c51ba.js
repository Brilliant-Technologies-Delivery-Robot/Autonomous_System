(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4736,6758],{97663:function(e,t,n){"use strict";let r,i;n.d(t,{F:function(){return W}});let o=new WeakMap,a=new WeakMap;class AbortSignal{constructor(){this.onabort=null,o.set(this,[]),a.set(this,!1)}get aborted(){if(!a.has(this))throw TypeError("Expected `this` to be an instance of AbortSignal.");return a.get(this)}static get none(){return new AbortSignal}addEventListener(e,t){if(!o.has(this))throw TypeError("Expected `this` to be an instance of AbortSignal.");o.get(this).push(t)}removeEventListener(e,t){if(!o.has(this))throw TypeError("Expected `this` to be an instance of AbortSignal.");let n=o.get(this),r=n.indexOf(t);r>-1&&n.splice(r,1)}dispatchEvent(e){throw Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")}}function s(e){if(e.aborted)return;e.onabort&&e.onabort.call(e);let t=o.get(e);t&&t.slice().forEach(t=>{t.call(e,{type:"abort"})}),a.set(e,!0)}class u extends Error{constructor(e){super(e),this.name="AbortError"}}class l{constructor(e){if(this._signal=new AbortSignal,!e)return;for(let t of(Array.isArray(e)||(e=arguments),e))t.aborted?this.abort():t.addEventListener("abort",()=>{this.abort()})}get signal(){return this._signal}abort(){s(this._signal)}static timeout(e){let t=new AbortSignal,n=setTimeout(s,e,t);return"function"==typeof n.unref&&n.unref(),t}}function c(e,t){let n;let{abortSignal:r,abortErrorMsg:i}=null!=t?t:{};return function(e,t){let{cleanupBeforeAbort:n,abortSignal:r,abortErrorMsg:i}=null!=t?t:{};return new Promise((t,o)=>{function a(){o(new u(null!=i?i:"The operation was aborted."))}function s(){null==r||r.removeEventListener("abort",l)}function l(){null==n||n(),s(),a()}if(null==r?void 0:r.aborted)return a();try{e(e=>{s(),t(e)},e=>{s(),o(e)})}catch(e){o(e)}null==r||r.addEventListener("abort",l)})}(t=>{n=setTimeout(t,e)},{cleanupBeforeAbort:()=>clearTimeout(n),abortSignal:r,abortErrorMsg:null!=i?i:"The delay was aborted."})}var f,d,p=n(36560),h=n.n(p);class m extends Error{constructor(e,t){super(e),this.name="SendMessageError",this.ackId=t.ackId,this.errorDetail=t.errorDetail}}var g=n(26709);let v=void 0!==g&&g.env&&g.env.DEBUG||void 0,y=[],b=[],_=[];v&&S(v);let E=Object.assign(e=>k(e),{enable:S,enabled:w,disable:function(){let e=r||"";return S(""),e},log:function(...e){if(e.length>0){let t=String(e[0]);t.includes(":error")?console.error(...e):t.includes(":warning")?console.warn(...e):t.includes(":info")?console.info(...e):(t.includes(":verbose"),console.debug(...e))}}});function S(e){r=e,y=[],b=[];let t=/\*/g;for(let n of e.split(",").map(e=>e.trim().replace(t,".*?")))n.startsWith("-")?b.push(RegExp(`^${n.substr(1)}$`)):y.push(RegExp(`^${n}$`));for(let e of _)e.enabled=w(e.namespace)}function w(e){if(e.endsWith("*"))return!0;for(let t of b)if(t.test(e))return!1;for(let t of y)if(t.test(e))return!0;return!1}function k(e){let t=Object.assign(function(...n){t.enabled&&(n.length>0&&(n[0]=`${e} ${n[0]}`),t.log(...n))},{enabled:w(e),destroy:T,log:E.log,namespace:e,extend:A});return _.push(t),t}function T(){let e=_.indexOf(this);return e>=0&&(_.splice(e,1),!0)}function A(e){let t=k(`${this.namespace}:${e}`);return t.log=this.log,t}var C=n(26709);let x=new Set,O=void 0!==C&&C.env&&C.env.AZURE_LOG_LEVEL||void 0,R=E("azure");R.log=(...e)=>{E.log(...e)};let I=["verbose","info","warning","error"];O&&(L(O)?function(e){if(e&&!L(e))throw Error(`Unknown log level '${e}'. Acceptable values: ${I.join(",")}`);i=e;let t=[];for(let e of x)M(e)&&t.push(e.namespace);E.enable(t.join(","))}(O):console.error(`AZURE_LOG_LEVEL set to unknown log level '${O}'; logging is not enabled. Acceptable values: ${I.join(", ")}.`));let P={verbose:400,info:300,warning:200,error:100};function D(e,t){t.log=(...t)=>{e.log(...t)}}function N(e,t){let n=Object.assign(e.extend(t),{level:t});if(D(e,n),M(n)){let e=E.disable();E.enable(e+","+n.namespace)}return x.add(n),n}function M(e){return!!(i&&P[e.level]<=P[i])}function L(e){return I.includes(e)}let j=function(e){let t=R.extend(e);return D(R,t),{error:N(t,"error"),warning:N(t,"warning"),info:N(t,"info"),verbose:N(t,"verbose")}}("web-pubsub-client");var F=n(14984);function B(e,t){switch(t){case"text":if("string"!=typeof e)throw TypeError("Message must be a string.");return e;case"json":return e;case"binary":case"protobuf":if(e instanceof ArrayBuffer)return F.lW.from(e).toString("base64");throw TypeError("Message must be a ArrayBuffer")}}function U(e,t){if("text"===t){if("string"!=typeof e)throw TypeError("Message must be a string when dataType is text");return e}if("json"===t)return e;if("binary"!==t&&"protobuf"!==t)return null;{let t=F.lW.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}}class z{constructor(){this.isReliableSubProtocol=!0,this.name="json.reliable.webpubsub.azure.v1"}parseMessages(e){return function(e){let t;if("string"!=typeof e)throw Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)throw Error("No input");let n=JSON.parse(e);if("system"===n.type){if("connected"===n.event)t=Object.assign(Object.assign({},n),{kind:"connected"});else{if("disconnected"!==n.event)return null;t=Object.assign(Object.assign({},n),{kind:"disconnected"})}}else if("message"===n.type){if("group"===n.from){let e=U(n.data,n.dataType);if(null===e)return null;t=Object.assign(Object.assign({},n),{data:e,kind:"groupData"})}else{if("server"!==n.from)return null;let e=U(n.data,n.dataType);if(null===e)return null;t=Object.assign(Object.assign({},n),{data:e,kind:"serverData"})}}else{if("ack"!==n.type)return null;t=Object.assign(Object.assign({},n),{kind:"ack"})}return t}(e)}writeMessage(e){return function(e){let t;switch(e.kind){case"joinGroup":t={type:"joinGroup",group:e.group,ackId:e.ackId};break;case"leaveGroup":t={type:"leaveGroup",group:e.group,ackId:e.ackId};break;case"sendEvent":t={type:"event",event:e.event,ackId:e.ackId,dataType:e.dataType,data:B(e.data,e.dataType)};break;case"sendToGroup":t={type:"sendToGroup",group:e.group,ackId:e.ackId,dataType:e.dataType,data:B(e.data,e.dataType),noEcho:e.noEcho};break;case"sequenceAck":t={type:"sequenceAck",sequenceId:e.sequenceId};break;default:throw Error(`Unsupported type: ${e.kind}`)}return JSON.stringify(t)}(e)}}let H=()=>new z;class G{constructor(e,t){this._socket=new WebSocket(e,t),this._socket.binaryType="arraybuffer"}onopen(e){this._socket.onopen=e}onclose(e){this._socket.onclose=t=>e(t.code,t.reason)}onerror(e){this._socket.onerror=t=>e(t)}onmessage(e){this._socket.onmessage=t=>e(t.data)}close(e,t){this._socket.close(e,t)}send(e,t){return new Promise((t,n)=>{try{this._socket.send(e),t()}catch(e){n(e)}})}isOpen(){return this._socket.readyState===WebSocket.OPEN}}class V{create(e,t){return new G(e,t)}}async function q(e,t){let n;if(t.aborted)throw new u("The operation was aborted.");let r=new Promise((e,r)=>{n=()=>{r(new u("The operation was aborted."))},t.addEventListener("abort",n)});try{return await Promise.race([e,r])}finally{t.removeEventListener("abort",n)}}var K=n(14984).lW;(f=d||(d={})).Stopped="Stopped",f.Disconnected="Disconnected",f.Connecting="Connecting",f.Connected="Connected",f.Recovering="Recovering";class W{nextAckId(){return this._ackId=this._ackId+1,this._ackId}constructor(e,t){this._quickSequenceAckDiff=300,this._activeTimeoutInMs=2e4,this._emitter=new(h()),this._isStopping=!1,this._isInitialConnected=!1,"string"==typeof e?this._credential={getClientAccessUrl:e}:this._credential=e,null==t&&(t={}),this._buildDefaultOptions(t),this._options=t,this._messageRetryPolicy=new $(this._options.messageRetryOptions),this._reconnectRetryPolicy=new $(this._options.reconnectRetryOptions),this._protocol=this._options.protocol,this._groupMap=new Map,this._ackMap=new Map,this._sequenceId=new Y,this._state=d.Stopped,this._ackId=0}async start(e){let t;if(this._isStopping)throw Error("Can't start a client during stopping");if(this._state!==d.Stopped)throw Error("Client can be only started when it's Stopped");e&&(t=e.abortSignal),this._activeKeepaliveTask||(this._activeKeepaliveTask=this._getActiveKeepaliveTask());try{await this._startCore(t)}catch(e){throw this._changeState(d.Stopped),this._activeKeepaliveTask&&(this._activeKeepaliveTask.abort(),this._activeKeepaliveTask=void 0),this._isStopping=!1,e}}async _startFromRestarting(e){if(this._state!==d.Disconnected)throw Error("Client can be only restarted when it's Disconnected");try{j.verbose("Staring reconnecting."),await this._startCore(e)}catch(e){throw this._changeState(d.Disconnected),e}}async _startCore(e){if(this._changeState(d.Connecting),j.info("Staring a new connection"),this._sequenceId.reset(),this._isInitialConnected=!1,this._lastCloseEvent=void 0,this._lastDisconnectedMessage=void 0,this._connectionId=void 0,this._reconnectionToken=void 0,this._uri=void 0,"string"==typeof this._credential.getClientAccessUrl?this._uri=this._credential.getClientAccessUrl:this._uri=await this._credential.getClientAccessUrl({abortSignal:e}),"string"!=typeof this._uri)throw Error(`The clientAccessUrl must be a string but currently it's ${typeof this._uri}`);await this._connectCore(this._uri)}stop(){this._state!==d.Stopped&&!this._isStopping&&(this._isStopping=!0,this._wsClient&&this._wsClient.isOpen()?this._wsClient.close():this._isStopping=!1,this._activeKeepaliveTask&&(this._activeKeepaliveTask.abort(),this._activeKeepaliveTask=void 0))}on(e,t){this._emitter.on(e,t)}off(e,t){this._emitter.removeListener(e,t)}_emitEvent(e,t){this._emitter.emit(e,t)}async sendEvent(e,t,n,r){return await this._operationExecuteWithRetry(()=>this._sendEventAttempt(e,t,n,r),null==r?void 0:r.abortSignal)}async _sendEventAttempt(e,t,n,r){var i;return null!==(i=null==r?void 0:r.fireAndForget)&&void 0!==i&&i?(await this._sendMessage({kind:"sendEvent",dataType:n,data:t,event:e},null==r?void 0:r.abortSignal),{isDuplicated:!1}):await this._sendMessageWithAckId(r=>({kind:"sendEvent",dataType:n,data:t,ackId:r,event:e}),null==r?void 0:r.ackId,null==r?void 0:r.abortSignal)}async joinGroup(e,t){return await this._operationExecuteWithRetry(()=>this._joinGroupAttempt(e,t),null==t?void 0:t.abortSignal)}async _joinGroupAttempt(e,t){let n=this._getOrAddGroup(e),r=await this._joinGroupCore(e,t);return n.isJoined=!0,r}async _joinGroupCore(e,t){return await this._sendMessageWithAckId(t=>({group:e,ackId:t,kind:"joinGroup"}),null==t?void 0:t.ackId,null==t?void 0:t.abortSignal)}async leaveGroup(e,t){return await this._operationExecuteWithRetry(()=>this._leaveGroupAttempt(e,t),null==t?void 0:t.abortSignal)}async _leaveGroupAttempt(e,t){let n=this._getOrAddGroup(e),r=await this._sendMessageWithAckId(t=>({group:e,ackId:t,kind:"leaveGroup"}),null==t?void 0:t.ackId,null==t?void 0:t.abortSignal);return n.isJoined=!1,r}async sendToGroup(e,t,n,r){return await this._operationExecuteWithRetry(()=>this._sendToGroupAttempt(e,t,n,r),null==r?void 0:r.abortSignal)}async _sendToGroupAttempt(e,t,n,r){var i,o;let a=null!==(i=null==r?void 0:r.fireAndForget)&&void 0!==i&&i,s=null!==(o=null==r?void 0:r.noEcho)&&void 0!==o&&o;return a?(await this._sendMessage({kind:"sendToGroup",group:e,dataType:n,data:t,noEcho:s},null==r?void 0:r.abortSignal),{isDuplicated:!1}):await this._sendMessageWithAckId(r=>({kind:"sendToGroup",group:e,dataType:n,data:t,ackId:r,noEcho:s}),null==r?void 0:r.ackId,null==r?void 0:r.abortSignal)}_getWebSocketClientFactory(){return new V}async _trySendSequenceAck(){if(!this._protocol.isReliableSubProtocol)return;let[e,t]=this._sequenceId.tryGetSequenceId();if(e&&t)try{await this._sendMessage({kind:"sequenceAck",sequenceId:t})}catch(e){this._sequenceId.tryUpdate(t)}}_connectCore(e){if(this._isStopping)throw Error("Can't start a client during stopping");return new Promise((t,n)=>{let r=this._wsClient=this._getWebSocketClientFactory().create(e,this._protocol.name);r.onopen(()=>{if(this._isStopping){try{r.close()}catch(e){}n(Error("The client is stopped"))}j.verbose("WebSocket connection has opened"),this._changeState(d.Connected),this._protocol.isReliableSubProtocol&&(null!=this._sequenceAckTask&&this._sequenceAckTask.abort(),this._sequenceAckTask=new X(async()=>{await this._trySendSequenceAck()},1e3)),t()}),r.onerror(e=>{null!=this._sequenceAckTask&&this._sequenceAckTask.abort(),n(e)}),r.onclose((e,t)=>{this._state===d.Connected?(j.verbose("WebSocket closed after open"),null!=this._sequenceAckTask&&this._sequenceAckTask.abort(),j.info(`WebSocket connection closed. Code: ${e}, Reason: ${t}`),this._lastCloseEvent={code:e,reason:t},this._handleConnectionClose.call(this)):(j.verbose("WebSocket closed before open"),n(Error(`Failed to start WebSocket: ${e}`)))}),r.onmessage(e=>{let t;let n=e=>{if(this._ackMap.has(e.ackId)){let t=this._ackMap.get(e.ackId);this._ackMap.delete(e.ackId);let n=null!=e.error&&"Duplicate"===e.error.name;e.success||n?t.resolve({ackId:e.ackId,isDuplicated:n}):t.reject(new m("Failed to send message.",{ackId:e.ackId,errorDetail:e.error}))}},r=async e=>{if(this._connectionId=e.connectionId,this._reconnectionToken=e.reconnectionToken,!this._isInitialConnected){if(this._isInitialConnected=!0,this._options.autoRejoinGroups){let e=[];this._groupMap.forEach(t=>{t.isJoined&&e.push((async()=>{try{await this._joinGroupCore(t.name)}catch(e){this._safeEmitRejoinGroupFailed(t.name,e)}})())});try{await Promise.all(e)}catch(e){}}this._safeEmitConnected(e.connectionId,e.userId)}},i=e=>{this._lastDisconnectedMessage=e},o=e=>{if(null!=e.sequenceId){let t=this._sequenceId.tryUpdate(e.sequenceId);if(0===t)return;t>this._quickSequenceAckDiff&&this._trySendSequenceAck()}this._safeEmitGroupMessage(e)},a=e=>{if(null!=e.sequenceId){let t=this._sequenceId.tryUpdate(e.sequenceId);if(0===t)return;t>this._quickSequenceAckDiff&&this._trySendSequenceAck()}this._safeEmitServerMessage(e)};try{let n;if(n=Array.isArray(e)?K.concat(e):e,t=this._protocol.parseMessages(n),null===t)return}catch(e){throw j.warning("An error occurred while parsing the message from service",e),e}Array.isArray(t)||(t=[t]),t.forEach(e=>{try{switch(e.kind){case"ack":n(e);break;case"connected":r(e);break;case"disconnected":i(e);break;case"groupData":o(e);break;case"serverData":a(e)}}catch(t){j.warning(`An error occurred while handling the message with kind: ${e.kind} from service`,t)}})})})}async _handleConnectionCloseAndNoRecovery(){this._state=d.Disconnected,this._safeEmitDisconnected(this._connectionId,this._lastDisconnectedMessage),this._options.autoReconnect?await this._autoReconnect():await this._handleConnectionStopped()}async _autoReconnect(){let e=!1,t=0;try{for(;!this._isStopping;)try{await this._startFromRestarting(),e=!0;break}catch(n){j.warning("An attempt to reconnect connection failed.",n),t++;let e=this._reconnectRetryPolicy.nextRetryDelayInMs(t);if(null==e)break;try{j.verbose(`Delay time for reconnect attempt ${t}: ${e}`),await c(e)}catch(e){}}}finally{e||this._handleConnectionStopped()}}_handleConnectionStopped(){this._isStopping=!1,this._state=d.Stopped,this._safeEmitStopped()}_getActiveKeepaliveTask(){return new X(async()=>{this._sequenceId.tryUpdate(0)},this._activeTimeoutInMs)}async _sendMessage(e,t){if(!this._wsClient||!this._wsClient.isOpen())throw Error("The connection is not connected.");let n=this._protocol.writeMessage(e);await this._wsClient.send(n,t)}async _sendMessageWithAckId(e,t,n){null==t&&(t=this.nextAckId());let r=e(t);this._ackMap.has(t)||this._ackMap.set(t,new Z(t));let i=this._ackMap.get(t);try{await this._sendMessage(r,n)}catch(n){this._ackMap.delete(t);let e="";throw n instanceof Error&&(e=n.message),new m(e,{ackId:t})}if(n)try{return await q(i.promise(),n)}catch(e){if(e instanceof Error&&"AbortError"===e.name)throw new m("Cancelled by abortSignal",{ackId:t});throw e}return await i.promise()}async _handleConnectionClose(){if(this._ackMap.forEach((e,t)=>{this._ackMap.delete(t)&&e.reject(new m("Connection is disconnected before receive ack from the service",{ackId:e.ackId}))}),this._isStopping){j.warning("The client is stopping state. Stop recovery."),this._handleConnectionCloseAndNoRecovery();return}if(this._lastCloseEvent&&1008===this._lastCloseEvent.code){j.warning("The websocket close with status code 1008. Stop recovery."),this._handleConnectionCloseAndNoRecovery();return}if(!this._protocol.isReliableSubProtocol){j.warning("The protocol is not reliable, recovery is not applicable"),this._handleConnectionCloseAndNoRecovery();return}let e=this._buildRecoveryUri();if(!e){j.warning("Connection id or reconnection token is not available"),this._handleConnectionCloseAndNoRecovery();return}let t=!1;this._state=d.Recovering;let n=l.timeout(3e4);try{for(;!n.aborted||this._isStopping;)try{await this._connectCore.call(this,e),t=!0;return}catch(e){await c(1e3)}}finally{t||(j.warning("Recovery attempts failed more then 30 seconds or the client is stopping"),this._handleConnectionCloseAndNoRecovery())}}_safeEmitConnected(e,t){this._emitEvent("connected",{connectionId:e,userId:t})}_safeEmitDisconnected(e,t){this._emitEvent("disconnected",{connectionId:e,message:t})}_safeEmitGroupMessage(e){this._emitEvent("group-message",{message:e})}_safeEmitServerMessage(e){this._emitEvent("server-message",{message:e})}_safeEmitStopped(){this._emitEvent("stopped",{})}_safeEmitRejoinGroupFailed(e,t){this._emitEvent("rejoin-group-failed",{group:e,error:t})}_buildDefaultOptions(e){return null==e.autoReconnect&&(e.autoReconnect=!0),null==e.autoRejoinGroups&&(e.autoRejoinGroups=!0),null==e.protocol&&(e.protocol=H()),this._buildMessageRetryOptions(e),this._buildReconnectRetryOptions(e),e}_buildMessageRetryOptions(e){e.messageRetryOptions||(e.messageRetryOptions={}),(null==e.messageRetryOptions.maxRetries||e.messageRetryOptions.maxRetries<0)&&(e.messageRetryOptions.maxRetries=3),(null==e.messageRetryOptions.retryDelayInMs||e.messageRetryOptions.retryDelayInMs<0)&&(e.messageRetryOptions.retryDelayInMs=1e3),(null==e.messageRetryOptions.maxRetryDelayInMs||e.messageRetryOptions.maxRetryDelayInMs<0)&&(e.messageRetryOptions.maxRetryDelayInMs=3e4),null==e.messageRetryOptions.mode&&(e.messageRetryOptions.mode="Fixed")}_buildReconnectRetryOptions(e){e.reconnectRetryOptions||(e.reconnectRetryOptions={}),(null==e.reconnectRetryOptions.maxRetries||e.reconnectRetryOptions.maxRetries<0)&&(e.reconnectRetryOptions.maxRetries=Number.MAX_VALUE),(null==e.reconnectRetryOptions.retryDelayInMs||e.reconnectRetryOptions.retryDelayInMs<0)&&(e.reconnectRetryOptions.retryDelayInMs=1e3),(null==e.reconnectRetryOptions.maxRetryDelayInMs||e.reconnectRetryOptions.maxRetryDelayInMs<0)&&(e.reconnectRetryOptions.maxRetryDelayInMs=3e4),null==e.reconnectRetryOptions.mode&&(e.reconnectRetryOptions.mode="Fixed")}_buildRecoveryUri(){if(this._connectionId&&this._reconnectionToken&&this._uri){let e=new URL(this._uri);return e.searchParams.append("awps_connection_id",this._connectionId),e.searchParams.append("awps_reconnection_token",this._reconnectionToken),e.toString()}return null}_getOrAddGroup(e){return this._groupMap.has(e)||this._groupMap.set(e,new Q(e)),this._groupMap.get(e)}_changeState(e){j.verbose(`The client state transfer from ${this._state.toString()} to ${e.toString()}`),this._state=e}async _operationExecuteWithRetry(e,t){let n=0;for(;;)try{return await e.call(this)}catch(r){n++;let e=this._messageRetryPolicy.nextRetryDelayInMs(n);if(null==e||(await c(e),null==t?void 0:t.aborted))throw r}}}class ${constructor(e){this._retryOptions=e,this._maxRetriesToGetMaxDelay=Math.ceil(Math.log2(this._retryOptions.maxRetryDelayInMs)-Math.log2(this._retryOptions.retryDelayInMs)+1)}nextRetryDelayInMs(e){return e>this._retryOptions.maxRetries?null:"Fixed"===this._retryOptions.mode?this._retryOptions.retryDelayInMs:this._calculateExponentialDelay(e)}_calculateExponentialDelay(e){return e>=this._maxRetriesToGetMaxDelay?this._retryOptions.maxRetryDelayInMs:(1<<e-1)*this._retryOptions.retryDelayInMs}}class Q{constructor(e){this.isJoined=!1,this.name=e}}class Z{constructor(e){this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t}),this.ackId=e}promise(){return this._promise}resolve(e){this._resolve(e)}reject(e){this._reject(e)}}class Y{constructor(){this._sequenceId=0,this._isUpdate=!1}tryUpdate(e){if(this._isUpdate=!0,e>this._sequenceId){let t=e-this._sequenceId;return this._sequenceId=e,t}return 0}tryGetSequenceId(){return this._isUpdate?(this._isUpdate=!1,[!0,this._sequenceId]):[!1,null]}reset(){this._sequenceId=0,this._isUpdate=!1}}class X{constructor(e,t,n){this._func=e,this._abortController=new l,this._interval=t,this._obj=n,this._start()}abort(){try{this._abortController.abort()}catch(e){}}async _start(){let e=this._abortController.signal;for(;!e.aborted;)try{await this._func(this._obj)}catch(e){}finally{await c(this._interval)}}}},78969:function(e,t,n){"use strict";n.d(t,{J:function(){return tD},v:function(){return ip}});var r,i,o,a,s,u,l,c,f,d,p,h,m,g,v,y,b,_,E,S,w,k,T,A,C,x,O,R,I,P,D,N={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},M=console,L={};Object.keys(N).forEach(function(e){L[e]=M[e]});var j="Datadog Browser SDK:",F={debug:L.debug.bind(M,j),log:L.log.bind(M,j),info:L.info.bind(M,j),warn:L.warn.bind(M,j),error:L.error.bind(M,j)};function B(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return e.apply(void 0,n)}catch(e){F.error(t,e)}}}var U=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},z=!1;function H(e){z=e}function G(e){return function(){return V(e,this,arguments)}}function V(e,t,n){try{return e.apply(t,n)}catch(e){if(q(e),l)try{l(e)}catch(e){q(e)}}}function q(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];z&&F.error.apply(F,U(["[MONITOR]"],e,!1))}function K(e,t){return -1!==e.indexOf(t)}function W(e){if(Array.from)return Array.from(e);var t=[];if(e instanceof Set)e.forEach(function(e){return t.push(e)});else for(var n=0;n<e.length;n++)t.push(e[n]);return t}function $(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(t(r,n))return r}}function Q(e){return Object.keys(e).map(function(t){return e[t]})}function Z(e){return Object.keys(e).map(function(t){return[t,e[t]]})}function Y(e,t){return e.slice(0,t.length)===t}function X(e){return window.CSS&&window.CSS.escape?window.CSS.escape(e):e.replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,function(e,t){return t?"\0"===e?"�":"".concat(e.slice(0,-1),"\\").concat(e.charCodeAt(e.length-1).toString(16)," "):"\\".concat(e)})}function J(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}),e}function ee(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&("object"==typeof self?e=self:e="object"==typeof window?window:{}),e}var et=/[^\u0000-\u007F]/;function en(e){return et.test(e)?void 0!==window.TextEncoder?new TextEncoder().encode(e).length:new Blob([e]).size:e.length}function er(e,t){var n,r=ee();return r.Zone&&"function"==typeof r.Zone.__symbol__&&(n=e[r.Zone.__symbol__(t)]),n||(n=e[t]),n}function ei(e,t){return er(ee(),"setTimeout")(G(e),t)}function eo(e){er(ee(),"clearTimeout")(e)}function ea(e,t){return er(ee(),"setInterval")(G(e),t)}function es(e){er(ee(),"clearInterval")(e)}function eu(e,t,n){var r,i,o=!n||void 0===n.leading||n.leading,a=!n||void 0===n.trailing||n.trailing,s=!1;return{throttled:function(){for(var n=[],u=0;u<arguments.length;u++)n[u]=arguments[u];if(s){r=n;return}o?e.apply(void 0,n):r=n,s=!0,i=ei(function(){a&&r&&e.apply(void 0,r),s=!1,r=void 0},t)},cancel:function(){eo(i),s=!1,r=void 0}}}function el(){}function ec(e,t,n){if("object"!=typeof e||null===e)return JSON.stringify(e);var r=ef(Object.prototype),i=ef(Array.prototype),o=ef(Object.getPrototypeOf(e)),a=ef(e);try{return JSON.stringify(e,t,n)}catch(e){return"<error: unable to serialize object>"}finally{r(),i(),o(),a()}}function ef(e){var t=e.toJSON;return t?(delete e.toJSON,function(){e.toJSON=t}):el}function ed(e){return J({},e)}function ep(e,t){return Object.keys(e).some(function(n){return e[n]===t})}function eh(e){return 0===Object.keys(e).length}function em(e){var t=0,n=eu(function(n){t=en(ec(n)),e()},200),r=n.throttled,i=n.cancel,o=function(){i(),t=0};return{updateCustomerData:function(e){eh(e)?o():r(e)},resetCustomerData:o,getBytesCount:function(){return t},stop:function(){i()}}}function eg(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function ev(e,t,n){if(void 0===n&&(n=function(){if("undefined"!=typeof WeakSet){var e=new WeakSet;return{hasAlreadyBeenSeen:function(t){var n=e.has(t);return n||e.add(t),n}}}var t=[];return{hasAlreadyBeenSeen:function(e){var n=t.indexOf(e)>=0;return n||t.push(e),n}}}()),void 0===t)return e;if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var r=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,r)}if(!n.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var i=Array.isArray(e)?e:[],o=0;o<t.length;++o)i[o]=ev(i[o],t[o],n);return i}var a="object"===eg(e)?e:{};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(a[s]=ev(a[s],t[s],n));return a}}function ey(e){return ev(void 0,e)}function eb(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++){var i=t[r];null!=i&&(e=ev(e,i))}return e}function e_(e,t){void 0===t&&(t=225280);var n,r=ef(Object.prototype),i=ef(Array.prototype),o=[],a=new WeakMap,s=eE(e,"$",void 0,o,a),u=(null===(n=JSON.stringify(s))||void 0===n?void 0:n.length)||0;if(u>t){eS(t,"discarded",e);return}for(;o.length>0&&u<t;){var l=o.shift(),c=0;if(Array.isArray(l.source))for(var f=0;f<l.source.length;f++){var d=eE(l.source[f],l.path,f,o,a);if(void 0!==d?u+=JSON.stringify(d).length:u+=4,u+=c,c=1,u>t){eS(t,"truncated",e);break}l.target[f]=d}else for(var f in l.source)if(Object.prototype.hasOwnProperty.call(l.source,f)){var d=eE(l.source[f],l.path,f,o,a);if(void 0!==d&&(u+=JSON.stringify(d).length+c+f.length+3,c=1),u>t){eS(t,"truncated",e);break}l.target[f]=d}}return r(),i(),s}function eE(e,t,n,r,i){var o=function(e){if(e&&"function"==typeof e.toJSON)try{return e.toJSON()}catch(e){}return e}(e);if(!o||"object"!=typeof o)return"bigint"==typeof o?"[BigInt] ".concat(o.toString()):"function"==typeof o?"[Function] ".concat(o.name||"unknown"):"symbol"==typeof o?"[Symbol] ".concat(o.description||o.toString()):o;var a=function(e){try{if(e instanceof Event)return{isTrusted:e.isTrusted};var t=Object.prototype.toString.call(e).match(/\[object (.*)\]/);if(t&&t[1])return"[".concat(t[1],"]")}catch(e){}return"[Unserializable]"}(o);if("[Object]"!==a&&"[Array]"!==a&&"[Error]"!==a)return a;if(i.has(e))return"[Reference seen at ".concat(i.get(e),"]");var s=void 0!==n?"".concat(t,".").concat(n):t,u=Array.isArray(o)?[]:{};return i.set(e,s),r.push({source:o,target:u,path:s}),u}function eS(e,t,n){F.warn("The data provided has been ".concat(t," as it is over the limit of ").concat(e," characters:"),n)}var ew=function(){function e(e){this.onFirstSubscribe=e,this.observers=[]}return e.prototype.subscribe=function(e){var t=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0),this.observers.push(e),{unsubscribe:function(){t.observers=t.observers.filter(function(t){return e!==t}),!t.observers.length&&t.onLastUnsubscribe&&t.onLastUnsubscribe()}}},e.prototype.notify=function(e){this.observers.forEach(function(t){return t(e)})},e}();function ek(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new ew(function(t){var n=e.map(function(e){return e.subscribe(function(e){return t.notify(e)})});return function(){return n.forEach(function(e){return e.unsubscribe()})}})}function eT(e){var t={},n=new ew,r={getContext:function(){return ey(t)},setContext:function(i){"object"===eg(i)?(t=e_(i),e.updateCustomerData(t)):r.clearContext(),n.notify()},setContextProperty:function(r,i){t[r]=e_(i),e.updateCustomerData(t),n.notify()},removeContextProperty:function(r){delete t[r],e.updateCustomerData(t),n.notify()},clearContext:function(){t={},e.resetCustomerData(),n.notify()},changeObservable:n};return r}var eA=function(){function e(){this.buffer=[]}return e.prototype.add=function(e){this.buffer.push(e)>500&&this.buffer.splice(0,1)},e.prototype.drain=function(){this.buffer.forEach(function(e){return e()}),this.buffer.length=0},e}();function eC(e){return 0!==e&&100*Math.random()<=e}function ex(e,t){return+e.toFixed(t)}function eO(e){return eR(e)&&e>=0&&e<=100}function eR(e){return"number"==typeof e}function eI(e){var t;return{relative:e,timeStamp:(t=eD()-performance.now())>eF()?Math.round(t+e):Math.round(eF()+e)}}function eP(e){return eR(e)?ex(1e6*e,0):e}function eD(){return new Date().getTime()}function eN(){return eD()}function eM(){return performance.now()}function eL(){return{relative:eM(),timeStamp:eN()}}function ej(){return{relative:0,timeStamp:eF()}}function eF(){return void 0===c&&(c=performance.timing.navigationStart),c}function eB(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,eB)}var eU=/([\w-]+)\s*=\s*([^;]+)/g;function ez(e,t){for(eU.lastIndex=0;;){var n=eU.exec(e);if(n){if(n[1]===t)return n[2]}else break}}function eH(e,t,n){void 0===n&&(n="");var r=e.charCodeAt(t-1),i=r>=55296&&r<=56319?t+1:t;return e.length<=i?e:"".concat(e.slice(0,i)).concat(n)}function eG(e,t,n,r){var i=new Date;i.setTime(i.getTime()+n);var o="expires=".concat(i.toUTCString()),a=r&&r.crossSite?"none":"strict",s=r&&r.domain?";domain=".concat(r.domain):"",u=r&&r.secure?";secure":"",l=r&&r.partitioned?";partitioned":"";document.cookie="".concat(e,"=").concat(t,";").concat(o,";path=/;samesite=").concat(a).concat(s).concat(u).concat(l)}function eV(e){return ez(document.cookie,e)}function eq(e){return f||(f=function(e){var t=new Map;for(eU.lastIndex=0;;){var n=eU.exec(e);if(n)t.set(n[1],n[2]);else break}return t}(document.cookie)),f.get(e)}function eK(e,t){eG(e,"",0,t)}function eW(){return!!(window._DATADOG_SYNTHETICS_INJECTS_RUM||eq("datadog-synthetics-injects-rum"))}function e$(){var e=ee().DatadogEventBridge;if(e)return{getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,n){e.send(JSON.stringify({eventType:t,event:n}))}}}function eQ(e){void 0===e&&(e=null===(t=ee().location)||void 0===t?void 0:t.hostname);var t,n=e$();return!!n&&n.getAllowedWebViewHosts().some(function(t){var n,r;return e===t||(n=e,r=".".concat(t),n.slice(-r.length)===r)})}function eZ(e,t,n,r,i){return eY(e,t,[n],r,i)}function eY(e,t,n,r,i){var o=void 0===i?{}:i,a=o.once,s=o.capture,u=o.passive,l=G(function(t){(t.isTrusted||t.__ddIsTrusted||e.allowUntrustedEvents)&&(a&&d(),r(t))}),c=u?{capture:s,passive:u}:s,f=er(t,"addEventListener");function d(){var e=er(t,"removeEventListener");n.forEach(function(n){return e.call(t,n,l,c)})}return n.forEach(function(e){return f.call(t,e,l,c)}),{stop:d}}(r=p||(p={})).BEFORE_UNLOAD="beforeunload",r.CLICK="click",r.DBL_CLICK="dblclick",r.KEY_DOWN="keydown",r.LOAD="load",r.POP_STATE="popstate",r.SCROLL="scroll",r.TOUCH_START="touchstart",r.TOUCH_END="touchend",r.TOUCH_MOVE="touchmove",r.VISIBILITY_CHANGE="visibilitychange",r.PAGE_SHOW="pageshow",r.FREEZE="freeze",r.RESUME="resume",r.DOM_CONTENT_LOADED="DOMContentLoaded",r.POINTER_DOWN="pointerdown",r.POINTER_UP="pointerup",r.POINTER_CANCEL="pointercancel",r.HASH_CHANGE="hashchange",r.PAGE_HIDE="pagehide",r.MOUSE_DOWN="mousedown",r.MOUSE_UP="mouseup",r.MOUSE_MOVE="mousemove",r.FOCUS="focus",r.BLUR="blur",r.CONTEXT_MENU="contextmenu",r.RESIZE="resize",r.CHANGE="change",r.INPUT="input",r.PLAY="play",r.PAUSE="pause",r.SECURITY_POLICY_VIOLATION="securitypolicyviolation",r.SELECTION_CHANGE="selectionchange",r.STORAGE="storage";var eX=[];function eJ(e,t,n,r){var i="".concat("_dd_c","_").concat(t,"_").concat(n),o=eT(r);return a(),eX.push(eZ(e,window,p.STORAGE,function(e){i===e.key&&a()})),o.changeObservable.subscribe(function(){localStorage.setItem(i,JSON.stringify(o.getContext()))}),o;function a(){var e=localStorage.getItem(i),t=null!==e?JSON.parse(e):{};o.setContext(t)}}function e1(){var e="",t=0;return{isAsync:!1,get isEmpty(){return!e},write:function(n,r){var i=en(n);t+=i,e+=n,r&&r(i)},finish:function(e){e(this.finishSync())},finishSync:function(){var n={output:e,outputBytesCount:t,rawBytesCount:t,pendingData:""};return e="",t=0,n},estimateEncodedBytesCount:function(e){return e.length}}}function e0(e){var t=[],n=te(e,"stack"),r=String(e);return n&&Y(n,r)&&(n=n.slice(r.length)),n&&n.split("\n").forEach(function(e){var n=function(e){var t=e2.exec(e);if(t){var n=t[2]&&0===t[2].indexOf("native"),r=t[2]&&0===t[2].indexOf("eval"),i=e4.exec(t[2]);return r&&i&&(t[2]=i[1],t[3]=i[2],t[4]=i[3]),{args:n?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||"?",line:t[3]?+t[3]:void 0,url:n?void 0:t[2]}}}(e)||function(e){var t=e8.exec(e);if(t)return{args:[],column:t[3]?+t[3]:void 0,func:"?",line:t[2]?+t[2]:void 0,url:t[1]}}(e)||function(e){var t=e3.exec(e);if(t)return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||"?",line:+t[3],url:t[2]}}(e)||function(e){var t=e6.exec(e);if(t){var n=t[3]&&t[3].indexOf(" > eval")>-1,r=e7.exec(t[3]);return n&&r&&(t[3]=r[1],t[4]=r[2],t[5]=void 0),{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||"?",line:t[4]?+t[4]:void 0,url:t[3]}}}(e);n&&(!n.func&&n.line&&(n.func="?"),t.push(n))}),{message:te(e,"message"),name:te(e,"name"),stack:t}}var e5="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",e9="(?::(\\d+))",e2=RegExp("^\\s*at (.*?) ?\\(".concat(e5).concat(e9,"?").concat(e9,"?\\)?\\s*$"),"i"),e4=new RegExp("\\((\\S*)".concat(e9).concat(e9,"\\)")),e8=RegExp("^\\s*at ?".concat(e5).concat(e9,"?").concat(e9,"??\\s*$"),"i"),e3=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,e6=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,e7=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function te(e,t){if("object"==typeof e&&e&&t in e){var n=e[t];return"string"==typeof n?n:void 0}}var tt=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/,tn="No stack, consider using an instance of Error";function tr(e){var t=e.stackTrace,n=e.originalError,r=e.handlingStack,i=e.startClocks,o=e.nonErrorPrefix,a=e.source,s=e.handling,u=n instanceof Error,l=(null==t?void 0:t.message)&&(null==t?void 0:t.name)?t.message:u?"Empty message":"".concat(o," ").concat(ec(e_(n))),c=void 0!==t&&(u||t.stack.length>0&&(t.stack.length>1||void 0!==t.stack[0].url))?to(t):tn,f=u?function(e,t){for(var n=e,r=[];(null==n?void 0:n.cause)instanceof Error&&r.length<10;){var i=e0(n.cause);r.push({message:n.cause.message,source:t,type:null==i?void 0:i.name,stack:i&&to(i)}),n=n.cause}return r.length?r:void 0}(n,a):void 0,d=null==t?void 0:t.name,p=ti(n);return{startClocks:i,source:a,handling:s,handlingStack:r,originalError:n,type:d,message:l,stack:c,causes:f,fingerprint:p}}function ti(e){return e instanceof Error&&"dd_fingerprint"in e?String(e.dd_fingerprint):void 0}function to(e){var t=ta(e);return e.stack.forEach(function(e){var n="?"===e.func?"<anonymous>":e.func,r=e.args&&e.args.length>0?"(".concat(e.args.join(", "),")"):"",i=e.line?":".concat(e.line):"",o=e.line&&e.column?":".concat(e.column):"";t+="\n  at ".concat(n).concat(r," @ ").concat(e.url).concat(i).concat(o)}),t}function ta(e){return"".concat(e.name||"Error",": ").concat(e.message)}function ts(){var e,t=Error();if(!t.stack)try{throw t}catch(e){}return V(function(){var n=e0(t);n.stack=n.stack.slice(2),e=to(n)}),e}function tu(e){var t=J({},e);return["id","name","email"].forEach(function(e){e in t&&(t[e]=String(t[e]))}),t}(i=h||(h={})).PAGEHIDE="pagehide",i.FEATURE_FLAGS="feature_flags",i.RESOURCE_PAGE_STATES="resource_page_states",i.COLLECT_FLUSH_REASON="collect_flush_reason",i.ZERO_LCP_TELEMETRY="zero_lcp_telemetry",i.DISABLE_REPLAY_INLINE_CSS="disable_replay_inline_css",i.WRITABLE_RESOURCE_GRAPHQL="writable_resource_graphql";var tl=new Set;function tc(e){return tl.has(e)}function tf(){var e,t,n;return null!=m?m:(void 0===e&&(e=window),n=e.navigator.userAgent,m=e.chrome||/HeadlessChrome/.test(n)?1:(null===(t=e.navigator.vendor)||void 0===t?void 0:t.indexOf("Apple"))===0||/safari/i.test(n)&&!/chrome|android/i.test(n)?2:e.document.documentMode?0:3)}var td="_dd_s",tp=/^([a-z]+)=([a-z0-9-]+)$/;function th(e){e.expire=String(eD()+9e5)}function tm(e){return Z(e).map(function(e){var t=e[0],n=e[1];return"".concat(t,"=").concat(n)}).join("&")}function tg(e){var t={};return e&&(-1!==e.indexOf("&")||tp.test(e))&&e.split("&").forEach(function(e){var n=tp.exec(e);if(null!==n){var r=n[1],i=n[2];t[r]=i}}),t}function tv(){return tg(eV(td))}function ty(e){localStorage.setItem(td,tm(e))}function tb(){return tg(localStorage.getItem(td))}function t_(){localStorage.removeItem(td)}var tE=[];function tS(e,t,n){void 0===n&&(n=0);var r,i,o=t.isLockEnabled,a=t.retrieveSession,s=t.persistSession,u=t.clearSession;if(g||(g=e),e!==g){tE.push(e);return}if(o&&n>=100){tk(t);return}var l=a();if(o&&(l.lock||(i=eB(),l.lock=i,s(l),(l=a()).lock!==i))){tw(e,t,n);return}var c=e.process(l);if(o&&(l=a()).lock!==i){tw(e,t,n);return}if(c&&(eh(c)?u():(th(c),s(c))),o&&!(c&&eh(c))){if((l=a()).lock!==i){tw(e,t,n);return}delete l.lock,s(l),c=l}null===(r=e.after)||void 0===r||r.call(e,c||l),tk(t)}function tw(e,t,n){ei(function(){tS(e,t,n+1)},10)}function tk(e){g=void 0;var t=tE.shift();t&&tS(t,e)}function tT(e){return tA(e,function(e){if(e.origin&&"null"!==e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return"".concat(e.protocol,"//").concat(t)}(window.location)).href}function tA(e,t){var n=function(){if(void 0===v)try{var e=new tC("http://test/path");v="http://test/path"===e.href}catch(e){v=!1}return v?tC:void 0}();if(n)try{return void 0!==t?new n(e,t):new n(e)}catch(n){throw Error("Failed to construct URL: ".concat(String(n)," ").concat(ec({url:e,base:t})))}if(void 0===t&&!/:/.test(e))throw Error("Invalid URL: '".concat(e,"'"));var r=document,i=r.createElement("a");if(void 0!==t){var o=(r=document.implementation.createHTMLDocument("")).createElement("base");o.href=t,r.head.appendChild(o),r.body.appendChild(i)}return i.href=e,i}var tC=URL,tx="datad0g.com",tO="datadoghq.com";function tR(e,t,n){var r=function(e,t){var n="/api/v2/".concat(t),r=e.proxy;if("string"==typeof r){var i=tT(r);return function(e){return"".concat(i,"?ddforward=").concat(encodeURIComponent("".concat(n,"?").concat(e)))}}if("function"==typeof r)return function(e){return r({path:n,parameters:e})};var o=function(e){var t=e.site,n=void 0===t?tO:t,r=e.internalAnalyticsSubdomain;if(r&&n===tO)return"".concat(r,".").concat(tO);if("dd0g-gov.com"===n)return"http-intake.logs.".concat(n);var i=n.split("."),o=i.pop();return"browser-intake-".concat(i.join("-"),".").concat(o)}(e);return function(e){return"https://".concat(o).concat(n,"?").concat(e)}}(e,t);return{build:function(i,o){var a,s,u,l,c,f,d;return r((a=e.clientToken,s=e.internalAnalyticsSubdomain,u=o.retry,l=o.flushReason,c=o.encoding,f=["sdk_version:".concat("5.7.0"),"api:".concat(i)].concat(n),l&&tc(h.COLLECT_FLUSH_REASON)&&f.push("flush_reason:".concat(l)),u&&f.push("retry_count:".concat(u.count),"retry_after:".concat(u.lastFailureStatus)),d=["ddsource=browser","ddtags=".concat(encodeURIComponent(f.join(","))),"dd-api-key=".concat(a),"dd-evp-origin-version=".concat(encodeURIComponent("5.7.0")),"dd-evp-origin=browser","dd-request-id=".concat(eB())],c&&d.push("dd-evp-encoding=".concat(c)),"rum"===t&&d.push("batch_time=".concat(eN())),s&&d.reverse(),d.join("&")))},urlPrefix:r(""),trackType:t}}var tI=/[^a-z0-9_:./-]/;function tP(e,t){var n=200-e.length-1;(t.length>n||tI.test(t))&&F.warn("".concat(e," value doesn't meet tag requirements and will be sanitized"));var r=t.replace(/,/g,"_");return"".concat(e,":").concat(r)}var tD={ALLOW:"allow",MASK:"mask",MASK_USER_INPUT:"mask-user-input"};function tN(e){var t=eg(e);return"string"===t||"function"===t||e instanceof RegExp}function tM(e,t,n){return void 0===n&&(n=!1),e.some(function(e){try{if("function"==typeof e)return e(t);if(e instanceof RegExp)return e.test(t);if("string"==typeof e)return n?Y(t,e):e===t}catch(e){F.error(e)}return!1})}function tL(e){0!==e.status||e.isAborted||(e.traceId=void 0,e.spanId=void 0,e.traceSampled=void 0)}function tj(e,t,n,r){if(void 0!==tF()&&n.findTrackedSession()){var i,o,a,s,u,l=$(e.allowedTracingUrls,function(e){return tM([e.match],t.url,!0)});l&&(t.traceId=new tB,t.spanId=new tB,t.traceSampled=!eR(e.traceSampleRate)||eC(e.traceSampleRate),r((i=t.traceId,o=t.spanId,a=t.traceSampled,s=l.propagatorTypes,u={},s.forEach(function(e){switch(e){case"datadog":J(u,{"x-datadog-origin":"rum","x-datadog-parent-id":o.toDecimalString(),"x-datadog-sampling-priority":a?"1":"0","x-datadog-trace-id":i.toDecimalString()});break;case"tracecontext":J(u,{traceparent:"00-0000000000000000".concat(i.toPaddedHexadecimalString(),"-").concat(o.toPaddedHexadecimalString(),"-0").concat(a?"1":"0")});break;case"b3":J(u,{b3:"".concat(i.toPaddedHexadecimalString(),"-").concat(o.toPaddedHexadecimalString(),"-").concat(a?"1":"0")});break;case"b3multi":J(u,{"X-B3-TraceId":i.toPaddedHexadecimalString(),"X-B3-SpanId":o.toPaddedHexadecimalString(),"X-B3-Sampled":a?"1":"0"})}}),u)))}}function tF(){return window.crypto||window.msCrypto}var tB=function(){function e(){this.buffer=new Uint8Array(8),tF().getRandomValues(this.buffer),this.buffer[0]=127&this.buffer[0]}return e.prototype.toString=function(e){var t=this.readInt32(0),n=this.readInt32(4),r="";do{var i=t%e*4294967296+n;t=Math.floor(t/e),n=Math.floor(i/e),r=(i%e).toString(e)+r}while(t||n);return r},e.prototype.toDecimalString=function(){return this.toString(10)},e.prototype.toPaddedHexadecimalString=function(){var e=this.toString(16);return Array(17-e.length).join("0")+e},e.prototype.readInt32=function(e){return 16777216*this.buffer[e]+(this.buffer[e+1]<<16)+(this.buffer[e+2]<<8)+this.buffer[e+3]},e}(),tU=["tracecontext","datadog"];function tz(e,t,n){return{context:e.getContext(),user:t.getContext(),hasReplay:!!n.isRecording()||void 0}}function tH(e,t){var n=window.__ddBrowserSdkExtensionCallback;n&&n({type:e,payload:t})}var tG={log:"log",configuration:"configuration"},tV=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],tq=["ddog-gov.com"],tK={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1,telemetryConfigurationEnabled:!1};function tW(e,t){q(N.debug,e,t),tQ(J({type:tG.log,message:e,status:"debug"},t))}function t$(e,t){tQ(J({type:tG.log,status:"error"},function(e){if(e instanceof Error){var t=e0(e);return{error:{kind:t.name,stack:to((t.stack=t.stack.filter(function(e){return!e.url||tV.some(function(t){return Y(e.url,t)})}),t))},message:t.message}}return{error:{stack:tn},message:"".concat("Uncaught"," ").concat(ec(e))}}(e),t))}function tQ(e){y&&tK.sentEventCount<tK.maxEventsPerPage&&(tK.sentEventCount+=1,y(e))}var tZ={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function tY(){var e,t=window;if(t.Zone&&(e=er(t,"MutationObserver"),t.MutationObserver&&e===t.MutationObserver)){var n=er(new t.MutationObserver(el),"originalInstance");e=n&&n.constructor}return e||(e=t.MutationObserver),e}function tX(e,t,n){document.readyState===t||"complete"===document.readyState?n():eZ(e,window,"complete"===t?p.LOAD:p.DOM_CONTENT_LOADED,n,{once:!0})}var tJ="initial_document",t1=[["document",function(e){return tJ===e}],["xhr",function(e){return"xmlhttprequest"===e}],["fetch",function(e){return"fetch"===e}],["beacon",function(e){return"beacon"===e}],["css",function(e,t){return/\.css$/i.test(t)}],["js",function(e,t){return/\.js$/i.test(t)}],["image",function(e,t){return K(["image","img","icon"],e)||null!==/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(t)}],["font",function(e,t){return null!==/\.(woff|eot|woff2|ttf)$/i.exec(t)}],["media",function(e,t){return K(["audio","video"],e)||null!==/\.(mp3|mp4)$/i.exec(t)}]];function t0(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=1;n<e.length;n+=1)if(e[n-1]>e[n])return!1;return!0}function t5(e){if(t0(e.startTime,e.fetchStart,e.domainLookupStart,e.domainLookupEnd,e.connectStart,e.connectEnd,e.requestStart,e.responseStart,e.responseEnd)){if(!t9(e))return e;var t=e.redirectStart,n=e.redirectEnd;if(t<e.startTime&&(t=e.startTime),n<e.startTime&&(n=e.fetchStart),t0(e.startTime,t,n,e.fetchStart))return J({},e,{redirectEnd:n,redirectStart:t})}}function t9(e){return e.fetchStart!==e.startTime}function t2(e,t,n){return{duration:eP(n-t),start:eP(t-e)}}function t4(e,t){return t&&!e.isIntakeUrl(t)}function t8(e){return e.nodeType===Node.TEXT_NODE}function t3(e){return e.nodeType===Node.ELEMENT_NODE}function t6(e){return t3(e)&&!!e.shadowRoot}function t7(e){return!!e.host&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t3(e.host)}function ne(e,t){e.childNodes.forEach(t),t6(e)&&t(e.shadowRoot)}function nt(e){return t7(e)?e.host:e.parentNode}function nn(e,t){var n=t&&Number(t);if(e&&n)return{traceId:e,traceTime:n}}function nr(e){if(e&&e.nodeType===Node.COMMENT_NODE){var t=/^\s*DATADOG;(.*?)\s*$/.exec(e.data);if(t)return t[1]}}function ni(){return void 0!==window.performance&&"getEntries"in performance}function no(e){return window.PerformanceObserver&&void 0!==PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes(e)}function na(){var e={},t=performance.timing;for(var n in t)if(eR(t[n])){var r=t[n];e[n]=0===r?0:r-eF()}return e}function ns(e,t,n){var r=n.filter(function(e){return ep(b,e.entryType)}).filter(function(e){return!(e.entryType===b.NAVIGATION&&e.loadEventEnd<=0)&&(e.entryType!==b.RESOURCE||!!t4(t,e.name))});r.length&&e.notify(0,r)}(o=b||(b={})).EVENT="event",o.FIRST_INPUT="first-input",o.LARGEST_CONTENTFUL_PAINT="largest-contentful-paint",o.LAYOUT_SHIFT="layout-shift",o.LONG_TASK="longtask",o.NAVIGATION="navigation",o.PAINT="paint",o.RESOURCE="resource";var nu={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",SOURCE:"source",REPORT:"report"};function nl(e,t,n){var r=0,i=!1;return{isLimitReached:function(){if(0===r&&ei(function(){r=0},6e4),(r+=1)<=t||i)return i=!1,!1;if(r===t+1){i=!0;try{n({message:"Reached max number of ".concat(e,"s by minute: ").concat(t),source:nu.AGENT,startClocks:eL()})}finally{i=!1}}return!0}}}function nc(e,t,n){for(var r=e,i=t.split("."),o=0;o<i.length;o+=1){var a=i[o];if(!nf(r))return;o!==i.length-1?r=r[a]:r[a]=n}}function nf(e){return"object"===eg(e)}var nd={"view.name":"string","view.url":"string","view.referrer":"string"},np={context:"object"},nh=function(){function e(){this.callbacks={}}return e.prototype.notify=function(e,t){var n=this.callbacks[e];n&&n.forEach(function(e){return e(t)})},e.prototype.subscribe=function(e,t){var n=this;return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),{unsubscribe:function(){n.callbacks[e]=n.callbacks[e].filter(function(e){return t!==e})}}},e}(),nm=1/0,ng=function(){function e(e,t){var n=this;this.expireDelay=e,this.maxEntries=t,this.entries=[],this.clearOldValuesInterval=ea(function(){return n.clearOldValues()},6e4)}return e.prototype.add=function(e,t){var n=this,r={value:e,startTime:t,endTime:nm,remove:function(){var e=n.entries.indexOf(r);e>=0&&n.entries.splice(e,1)},close:function(e){r.endTime=e}};return this.maxEntries&&this.entries.length>=this.maxEntries&&this.entries.pop(),this.entries.unshift(r),r},e.prototype.find=function(e){void 0===e&&(e=nm);for(var t=0,n=this.entries;t<n.length;t++){var r=n[t];if(r.startTime<=e){if(e<=r.endTime)return r.value;break}}},e.prototype.closeActive=function(e){var t=this.entries[0];t&&t.endTime===nm&&t.close(e)},e.prototype.findAll=function(e,t){void 0===e&&(e=nm),void 0===t&&(t=0);var n=e+t;return this.entries.filter(function(t){return t.startTime<=n&&e<=t.endTime}).map(function(e){return e.value})},e.prototype.reset=function(){this.entries=[]},e.prototype.stop=function(){es(this.clearOldValuesInterval)},e.prototype.clearOldValues=function(){for(var e=eM()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<e;)this.entries.pop()},e}();function nv(e,t,n){var r=e[t],i=function(){var e,t,i=arguments;return V(n,null,[{target:this,parameters:i,onPostCall:function(e){t=e}}]),"function"==typeof r&&(e=r.apply(this,i)),t&&V(t,null,[e]),e},o=function(){if("function"==typeof i)return i.apply(this,arguments)};return e[t]=o,{stop:function(){e[t]===o?e[t]=r:i=r}}}function ny(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(!r||!r.set||!r.configurable)return{stop:el};var i=function(e,t){ei(function(){n(e,t)},0)},o=function(e){r.set.call(this,e),i(this,e)};return Object.defineProperty(e,t,{set:o}),{stop:function(){var n;(null===(n=Object.getOwnPropertyDescriptor(e,t))||void 0===n?void 0:n.set)===o?Object.defineProperty(e,t,r):i=el}}}var nb=new WeakMap;function n_(e){var t=e.target,n=e.parameters,r=n[0],i=n[1];nb.set(t,{state:"open",method:r.toUpperCase(),url:tT(String(i))})}function nE(e){var t=e.target,n=nb.get(t);n&&(n.isAborted=!0)}var nS=1;function nw(){var e=nS;return nS+=1,e}function nk(e){var t=e.lifeCycle,n=e.isChildEvent,r=e.onChange,i=void 0===r?el:r,o={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0},a=t.subscribe(11,function(e){var t;if("view"!==e.type&&n(e))switch(e.type){case"error":o.errorCount+=1,i();break;case"action":o.actionCount+=1,e.action.frustration&&(o.frustrationCount+=e.action.frustration.type.length),i();break;case"long_task":o.longTaskCount+=1,i();break;case"resource":(null===(t=e._dd)||void 0===t?void 0:t.discarded)||(o.resourceCount+=1,i())}});return{stop:function(){a.unsubscribe()},eventCounts:o}}function nT(e,t,n){var r,i=!1,o=ei(G(function(){return l({hadActivity:!1})}),100),a=void 0!==n?ei(G(function(){return l({hadActivity:!0,end:eN()})}),n):void 0,s=e.subscribe(function(e){var t=e.isBusy;eo(o),eo(r);var n=eN();t||(r=ei(G(function(){return l({hadActivity:!0,end:n})}),100))}),u=function(){i=!0,eo(o),eo(r),eo(a),s.unsubscribe()};function l(e){i||(u(),t(e))}return{stop:u}}function nA(e,t,n){return new ew(function(r){var i,o=[],a=0;o.push(t.subscribe(u),e.subscribe(0,function(e){e.some(function(e){return e.entryType===b.RESOURCE&&!nC(n,e.name)})&&u()}),e.subscribe(5,function(e){nC(n,e.url)||(void 0===i&&(i=e.requestIndex),a+=1,u())}),e.subscribe(6,function(e){nC(n,e.url)||void 0===i||e.requestIndex<i||(a-=1,u())}));var s=nv(window,"open",u).stop;return function(){s(),o.forEach(function(e){return e.unsubscribe()})};function u(){r.notify({isBusy:a>0})}})}function nC(e,t){return tM(e.excludedActivityUrls,t)}var nx="data-dd-action-name";function nO(e,t){if(void 0===k&&(k="closest"in HTMLElement.prototype),k)n=e.closest("[".concat(t,"]"));else for(var n,r=e;r;){if(r.hasAttribute(t)){n=r;break}r=r.parentElement}if(n)return nN(nD(n.getAttribute(t).trim()))}var nR=[function(e,t){if(void 0===w&&(w="labels"in HTMLInputElement.prototype),w){if("labels"in e&&e.labels&&e.labels.length>0)return nM(e.labels[0],t)}else if(e.id){var n=e.ownerDocument&&$(e.ownerDocument.querySelectorAll("label"),function(t){return t.htmlFor===e.id});return n&&nM(n,t)}},function(e){if("INPUT"===e.nodeName){var t=e.getAttribute("type");if("button"===t||"submit"===t||"reset"===t)return e.value}},function(e,t){if("BUTTON"===e.nodeName||"LABEL"===e.nodeName||"button"===e.getAttribute("role"))return nM(e,t)},function(e){return e.getAttribute("aria-label")},function(e,t){var n=e.getAttribute("aria-labelledby");if(n)return n.split(/\s+/).map(function(t){return e.ownerDocument?e.ownerDocument.getElementById(t):null}).filter(function(e){return!!e}).map(function(e){return nM(e,t)}).join(" ")},function(e){return e.getAttribute("alt")},function(e){return e.getAttribute("name")},function(e){return e.getAttribute("title")},function(e){return e.getAttribute("placeholder")},function(e,t){if("options"in e&&e.options.length>0)return nM(e.options[0],t)}],nI=[function(e,t){return nM(e,t)}];function nP(e,t,n){for(var r=e,i=0;i<=10&&r&&"BODY"!==r.nodeName&&"HTML"!==r.nodeName&&"HEAD"!==r.nodeName;){for(var o=0;o<n.length;o++){var a=(0,n[o])(r,t);if("string"==typeof a){var s=a.trim();if(s)return nN(nD(s))}}if("FORM"===r.nodeName)break;r=r.parentElement,i+=1}}function nD(e){return e.replace(/\s+/g," ")}function nN(e){return e.length>100?"".concat(eH(e,100)," [...]"):e}function nM(e,t){if(!e.isContentEditable){if("innerText"in e){var n=e.innerText,r=function(t){for(var r=e.querySelectorAll(t),i=0;i<r.length;i+=1){var o=r[i];if("innerText"in o){var a=o.innerText;a&&a.trim().length>0&&(n=n.replace(a,""))}}};return 0!==tf()||r("script, style"),r("[".concat(nx,"]")),t&&r("[".concat(t,"]")),n}return e.textContent}}var nL=[nx,"data-testid","data-test","data-qa","data-cy","data-test-id","data-qa-id","data-testing","data-component","data-element","data-source-file"],nj=[nz,function(e){if(e.id&&!nU(e.id))return"#".concat(X(e.id))}],nF=[nz,function(e){if("BODY"!==e.tagName&&e.classList.length>0)for(var t=0;t<e.classList.length;t+=1){var n=e.classList[t];if(!nU(n))return"".concat(X(e.tagName),".").concat(X(n))}},function(e){return X(e.tagName)}];function nB(e,t){for(var n="",r=e;r&&"HTML"!==r.nodeName;){var i=nH(r,nj,nG,t,n);if(i)return i;n=nH(r,nF,nV,t,n)||nq(function(e){for(var t=e.parentElement.firstElementChild,n=1;t&&t!==e;)t.tagName===e.tagName&&(n+=1),t=t.nextElementSibling;return"".concat(X(e.tagName),":nth-of-type(").concat(n,")")}(r),n),r=r.parentElement}return n}function nU(e){return/[0-9]/.test(e)}function nz(e,t){if(t){var n=i(t);if(n)return n}for(var r=0;r<nL.length;r++){var n=i(nL[r]);if(n)return n}function i(t){if(e.hasAttribute(t))return"".concat(X(e.tagName),"[").concat(t,'="').concat(X(e.getAttribute(t)),'"]')}}function nH(e,t,n,r,i){for(var o=0;o<t.length;o++){var a=(0,t[o])(e,r);if(a){var s=nq(a,i);if(n(e,s))return s}}}function nG(e,t){return 1===e.ownerDocument.querySelectorAll(t).length}function nV(e,t){return 1===e.parentElement.querySelectorAll(!function(){if(void 0===T)try{document.querySelector(":scope"),T=!0}catch(e){T=!1}return T}()?t:nq(":scope",t)).length}function nq(e,t){return t?"".concat(e,">").concat(t):e}function nK(){var e=window.getSelection();return!e||e.isCollapsed}function nW(e){return e.target instanceof Element&&!1!==e.isPrimary}function n$(e){var t,n;return!e.hasPageActivity&&!e.getUserActivity().input&&(t=e.event.target,n='input:not([type="checkbox"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="range"]),textarea,select,[contenteditable],[contenteditable] *,canvas,a[href],a[href] *',t.matches?!t.matches(n):!(t.msMatchesSelector&&t.msMatchesSelector(n)))}function nQ(e,t){var n=nZ(e)?{action:{id:e.id,loading_time:eP(e.duration),frustration:{type:e.frustrationTypes},error:{count:e.counts.errorCount},long_task:{count:e.counts.longTaskCount},resource:{count:e.counts.resourceCount}},_dd:{action:{target:e.target,position:e.position}}}:void 0;return{customerContext:nZ(e)?void 0:e.context,rawRumEvent:eb({action:{id:eB(),target:{name:e.name},type:e.type},date:e.startClocks.timeStamp,type:"action",view:{in_foreground:t.isInActivePageStateAt(e.startClocks.relative)}},n),startTime:e.startClocks.relative,domainContext:nZ(e)?{events:e.events}:{}}}function nZ(e){return"custom"!==e.type}var nY={},nX="csp_violation";function nJ(e,t,n,r,i){return n?to({name:e,message:t,stack:[{func:"?",url:n,line:null!=r?r:void 0,column:null!=i?i:void 0}]}):void 0}function n1(e){return e.startTime+e.duration}function n0(e,t,n){return e.trackResources&&t.findTrackedSession(n.relative)}function n5(e){var t,n,r;return{resource:J({duration:(t=e.duration,n=e.startTime,r=e.responseEnd,0===t&&n<r?eP(r-n):eP(t)),size:function(e){if(e.startTime<e.responseStart)return e.decodedBodySize}(e)},function(e){var t=t5(e);if(t){var n=t.startTime,r=t.fetchStart,i=t.redirectStart,o=t.redirectEnd,a=t.domainLookupStart,s=t.domainLookupEnd,u=t.connectStart,l=t.secureConnectionStart,c=t.connectEnd,f=t.requestStart,d=t.responseStart,p={download:t2(n,d,t.responseEnd),first_byte:t2(n,f,d)};return c!==r&&(p.connect=t2(n,u,c),t0(u,l,c)&&(p.ssl=t2(n,l,c))),s!==r&&(p.dns=t2(n,a,s)),t9(e)&&(p.redirect=t2(n,i,o)),p}}(e))}}function n9(e){return eR(e.traceSampleRate)?e.traceSampleRate/100:void 0}function n2(e,t,n){if(tc(h.RESOURCE_PAGE_STATES))return{_dd:{page_states:e.findAll(t.relative,n),page_was_discarded:String(document.wasDiscarded)}}}var n4=!1;function n8(e){var t=e.toJSON();return delete t.element,t}var n3=0,n6=1/0,n7=0,re=function(){return C?n3:window.performance.interactionCount||0};function rt(){var e=window.visualViewport;return Math.round(e?e.pageLeft-e.offsetLeft:void 0!==window.scrollX?window.scrollX:window.pageXOffset||0)}function rn(){var e=window.visualViewport;return Math.round(e?e.pageTop-e.offsetTop:void 0!==window.scrollY?window.scrollY:window.pageYOffset||0)}function rr(e){return x||(x=new ew(function(t){var n=eu(function(){t.notify(ri())},200).throttled;return eZ(e,window,p.RESIZE,n,{capture:!0,passive:!0}).stop})),x}function ri(){var e=window.visualViewport;return e?{width:Number(e.width*e.scale),height:Number(e.height*e.scale)}:{width:Number(window.innerWidth||0),height:Number(window.innerHeight||0)}}function ro(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var ra=[];function rs(e){return"2"===e||"1"===e}var ru=function(){function e(e,t,n,r){var i=this;this.encoder=e,this.request=t,this.flushController=n,this.messageBytesLimit=r,this.upsertBuffer={},this.flushSubscription=this.flushController.flushObservable.subscribe(function(e){return i.flush(e)})}return e.prototype.add=function(e){this.addOrUpdate(e)},e.prototype.upsert=function(e,t){this.addOrUpdate(e,t)},e.prototype.stop=function(){this.flushSubscription.unsubscribe()},e.prototype.flush=function(e){var t,n=Q(this.upsertBuffer).join("\n");this.upsertBuffer={};var r=(t=e.reason,K(Q(tZ),t)),i=r?this.request.sendOnExit:this.request.send;if(r&&this.encoder.isAsync){var o=this.encoder.finishSync();o.outputBytesCount&&i(rl(o,e));var a=[o.pendingData,n].filter(Boolean).join("\n");a&&i({data:a,bytesCount:en(a),flushReason:e.reason})}else n&&this.encoder.write(this.encoder.isEmpty?n:"\n".concat(n)),this.encoder.finish(function(t){i(rl(t,e))})},e.prototype.addOrUpdate=function(e,t){var n=ec(e),r=this.encoder.estimateEncodedBytesCount(n);if(r>=this.messageBytesLimit){F.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB."));return}this.hasMessageFor(t)&&this.remove(t),this.push(n,r,t)},e.prototype.push=function(e,t,n){var r=this;this.flushController.notifyBeforeAddMessage(t),void 0!==n?(this.upsertBuffer[n]=e,this.flushController.notifyAfterAddMessage()):this.encoder.write(this.encoder.isEmpty?e:"\n".concat(e),function(e){r.flushController.notifyAfterAddMessage(e-t)})},e.prototype.remove=function(e){var t=this.upsertBuffer[e];delete this.upsertBuffer[e];var n=this.encoder.estimateEncodedBytesCount(t);this.flushController.notifyAfterRemoveMessage(n)},e.prototype.hasMessageFor=function(e){return void 0!==e&&void 0!==this.upsertBuffer[e]},e}();function rl(e,t){return{data:"string"==typeof e.output?e.output:new Blob([e.output],{type:"text/plain"}),bytesCount:e.outputBytesCount,encoding:e.encoding,flushReason:t.reason}}function rc(e,t,n,r,i){0===t.transportStatus&&0===t.queuedPayloads.size()&&t.bandwidthMonitor.canHandle(e)?rf(e,t,n,{onSuccess:function(){return rd(0,t,n,r,i)},onFailure:function(){t.queuedPayloads.enqueue(e),function e(t,n,r,i){2===t.transportStatus&&ei(function(){rf(t.queuedPayloads.first(),t,n,{onSuccess:function(){t.queuedPayloads.dequeue(),t.currentBackoffTime=1e3,rd(1,t,n,r,i)},onFailure:function(){t.currentBackoffTime=Math.min(6e4,2*t.currentBackoffTime),e(t,n,r,i)}})},t.currentBackoffTime)}(t,n,r,i)}}):t.queuedPayloads.enqueue(e)}function rf(e,t,n,r){var i=r.onSuccess,o=r.onFailure;t.bandwidthMonitor.add(e),n(e,function(n){t.bandwidthMonitor.remove(e),"opaque"!==n.type&&(0===n.status&&!navigator.onLine||408===n.status||429===n.status||n.status>=500)?(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:n.status},o()):(t.transportStatus=0,i())})}function rd(e,t,n,r,i){0===e&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(i({message:"Reached max ".concat(r," events size queued for upload: ").concat(3,"MiB"),source:nu.AGENT,startClocks:eL()}),t.queueFullReported=!0);var o=t.queuedPayloads;for(t.queuedPayloads=rp();o.size()>0;)rc(o.dequeue(),t,n,r,i)}function rp(){var e=[];return{bytesCount:0,enqueue:function(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:function(){return e[0]},dequeue:function(){var t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:function(){return e.length},isFull:function(){return this.bytesCount>=3145728}}}function rh(e,t,n,r){var i={transportStatus:0,currentBackoffTime:1e3,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return 0===this.ongoingRequestCount||this.ongoingByteCount+e.bytesCount<=81920&&this.ongoingRequestCount<32},add:function(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}},queuedPayloads:rp(),queueFullReported:!1},o=function(r,i){(function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(e){return!1}})()&&r.bytesCount<n?fetch(t.build("fetch",r),{method:"POST",body:r.data,keepalive:!0,mode:"cors"}).then(G(function(e){return null==i?void 0:i({status:e.status,type:e.type})}),G(function(){rg(e,t.build("xhr",r),r.data,i)})):rg(e,t.build("xhr",r),r.data,i)};return{send:function(e){rc(e,i,o,t.trackType,r)},sendOnExit:function(r){!function(e,t,n,r){if(navigator.sendBeacon&&r.bytesCount<n)try{var i=t.build("beacon",r);if(navigator.sendBeacon(i,r.data))return}catch(e){rm||(rm=!0,t$(e))}rg(e,t.build("xhr",r),r.data)}(e,t,n,r)}}}var rm=!1;function rg(e,t,n,r){var i=new XMLHttpRequest;i.open("POST",t,!0),n instanceof Blob&&i.setRequestHeader("Content-Type",n.type),eZ(e,i,"loadend",function(){null==r||r({status:i.status})},{once:!0}),i.send(n)}function rv(){0!==O.batchCount&&(tW("Customer data measures",O),rE())}function ry(){return{min:1/0,max:0,sum:0}}function rb(e,t){e.sum+=t,e.min=Math.min(e.min,t),e.max=Math.max(e.max,t)}function r_(e,t){e.sum+=t.sum,e.min=Math.min(e.min,t.min),e.max=Math.max(e.max,t.max)}function rE(){O={batchCount:0,batchBytesCount:ry(),batchMessagesCount:ry(),globalContextBytes:ry(),userContextBytes:ry(),featureFlagBytes:ry()}}function rS(){I=!1,R={globalContextBytes:ry(),userContextBytes:ry(),featureFlagBytes:ry()}}function rw(){return"hidden"===document.visibilityState?"hidden":document.hasFocus()?"active":"passive"}var rk={FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Focus:6,ViewEnd:7,VisualViewport:8,FrustrationRecord:9},rT={Document:0,DocumentType:1,Element:2,Text:3,CDATA:4,DocumentFragment:11},rA={Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8},rC={MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchEnd:9},rx={Play:0,Pause:1};function rO(e,t){return{data:J({source:e},t),type:rk.IncrementalSnapshot,timestamp:eN()}}var rR={IGNORE:"ignore",HIDDEN:"hidden",ALLOW:tD.ALLOW,MASK:tD.MASK,MASK_USER_INPUT:tD.MASK_USER_INPUT},rI="data-dd-privacy",rP="hidden",rD={INPUT:!0,OUTPUT:!0,TEXTAREA:!0,SELECT:!0,OPTION:!0,DATALIST:!0,OPTGROUP:!0};function rN(e,t){var n=nt(e),r=n?rN(n,t):t;return rM(rL(e),r)}function rM(e,t){switch(t){case rR.HIDDEN:case rR.IGNORE:return t}switch(e){case rR.ALLOW:case rR.MASK:case rR.MASK_USER_INPUT:case rR.HIDDEN:case rR.IGNORE:return e;default:return t}}function rL(e){if(t3(e)){var t=e.getAttribute(rI);if("BASE"===e.tagName)return rR.ALLOW;if("INPUT"===e.tagName){if("password"===e.type||"email"===e.type||"tel"===e.type||"hidden"===e.type)return rR.MASK;var n=e.getAttribute("autocomplete");if(n&&0===n.indexOf("cc-"))return rR.MASK}return t===rP||e.classList.contains("dd-privacy-hidden")?rR.HIDDEN:"mask"===t||e.classList.contains("dd-privacy-mask")?rR.MASK:"mask-user-input"===t||e.classList.contains("dd-privacy-mask-user-input")?rR.MASK_USER_INPUT:"allow"===t||e.classList.contains("dd-privacy-allow")?rR.ALLOW:!function(e){if("SCRIPT"===e.nodeName)return!0;if("LINK"===e.nodeName){var t=i("rel");return/preload|prefetch/i.test(t)&&"script"===i("as")||"shortcut icon"===t||"icon"===t}if("META"===e.nodeName){var n=i("name"),t=i("rel"),r=i("property");return/^msapplication-tile(image|color)$/.test(n)||"application-name"===n||"icon"===t||"apple-touch-icon"===t||"shortcut icon"===t||"keywords"===n||"description"===n||/^(og|twitter|fb):/.test(r)||/^(og|twitter):/.test(n)||"pinterest"===n||"robots"===n||"googlebot"===n||"bingbot"===n||e.hasAttribute("http-equiv")||"author"===n||"generator"===n||"framework"===n||"publisher"===n||"progid"===n||/^article:/.test(r)||/^product:/.test(r)||"google-site-verification"===n||"yandex-verification"===n||"csrf-token"===n||"p:domain_verify"===n||"verify-v1"===n||"verification"===n||"shopify-checkout-api-token"===n}function i(t){return(e.getAttribute(t)||"").toLowerCase()}return!1}(e)?void 0:rR.IGNORE}}function rj(e,t){switch(t){case rR.MASK:case rR.HIDDEN:case rR.IGNORE:return!0;case rR.MASK_USER_INPUT:return t8(e)?rF(e.parentNode):rF(e);default:return!1}}function rF(e){if(!e||e.nodeType!==e.ELEMENT_NODE)return!1;if("INPUT"===e.tagName)switch(e.type){case"button":case"color":case"reset":case"submit":return!1}return!!rD[e.tagName]}function rB(e,t,n){var r,i=null===(r=e.parentElement)||void 0===r?void 0:r.tagName,o=e.textContent||"";if(!t||o.trim()){if("SCRIPT"===i)o="***";else if(n===rR.HIDDEN)o="***";else if(rj(e,n)){if("DATALIST"===i||"SELECT"===i||"OPTGROUP"===i){if(!o.trim())return}else o="OPTION"===i?"***":o.replace(/\S/g,"x")}return o}}var rU=new WeakMap;function rz(e){return rU.has(e)}function rH(e){return rU.get(e)}function rG(e,t){var n=e.tagName,r=e.value;if(rj(e,t)){var i=e.type;if("INPUT"===n&&("button"===i||"submit"===i||"reset"===i))return r;if(!r||"OPTION"===n)return;return"***"}return"OPTION"===n||"SELECT"===n?e.value:"INPUT"===n||"TEXTAREA"===n?r:void 0}var rV=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,rq=/^[A-Za-z]+:|^\/\//,rK=/^data:.*,/i,rW=/[^a-z1-6-_]/;function r$(e){var t=e.toLowerCase().trim();return rW.test(t)?"div":t}function rQ(e){if(void 0!==e&&0!==e.length)return e.map(function(e){return{cssRules:Array.from(e.cssRules||e.rules,function(e){return e.cssText}),disabled:e.disabled||void 0,media:e.media.length>0?Array.from(e.media):void 0}})}function rZ(e,t,n,r){if(t===rR.HIDDEN)return null;var i=e.getAttribute(n);if(t===rR.MASK&&n!==rI&&!nL.includes(n)&&n!==r.actionNameAttribute){var o=e.tagName;switch(n){case"title":case"alt":case"placeholder":return"***"}if(("IMG"===o||"SOURCE"===o)&&("src"===n||"srcset"===n))return"data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==";if("A"===o&&"href"===n||i&&Y(n,"data-"))return"***"}return i&&"string"==typeof i&&i.length>1e5&&"data:"===i.slice(0,5)?"data:truncated":i}function rY(e){var t,n,r;if(!e)return null;try{t=e.rules||e.cssRules}catch(e){}return t?(n=Array.from(t,2===tf()?rX:rJ).join(""),r=e.href,n.replace(rV,function(e,t,n,i,o,a){var s=n||o||a;if(!r||!s||rq.test(s)||rK.test(s))return e;var u=t||i||"";return"url(".concat(u).concat(function(e,t){try{return tA(e,t).href}catch(t){return e}}(s,r)).concat(u,")")})):null}function rX(e){return"selectorText"in e&&e.selectorText.includes(":")?e.cssText.replace(/(\[[\w-]+[^\\])(:[^\]]+\])/g,"$1\\$2"):rJ(e)}function rJ(e){return"styleSheet"in e&&rY(e.styleSheet)||e.cssText}function r1(e,t){var n=function(e,t){var n;switch(e.nodeType){case e.DOCUMENT_NODE:return{type:rT.Document,childNodes:r5(e,t),adoptedStyleSheets:rQ(e.adoptedStyleSheets)};case e.DOCUMENT_FRAGMENT_NODE:return(n=t7(e))&&t.serializationContext.shadowRootsController.addShadowRoot(e),{type:rT.DocumentFragment,childNodes:r5(e,t),isShadowRoot:n,adoptedStyleSheets:n?rQ(e.adoptedStyleSheets):void 0};case e.DOCUMENT_TYPE_NODE:return{type:rT.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId};case e.ELEMENT_NODE:return function(e,t){var n,r=r$(e.tagName),i="svg"===e.tagName||e instanceof SVGElement||void 0,o=rM(rL(e),t.parentNodePrivacyLevel);if(o===rR.HIDDEN){var a=e.getBoundingClientRect(),s=a.width,u=a.height;return{type:rT.Element,tagName:r,attributes:((n={rr_width:"".concat(s,"px"),rr_height:"".concat(u,"px")})[rI]=rP,n),childNodes:[],isSVG:i}}if(o!==rR.IGNORE){var l=function(e,t,n){if(t===rR.HIDDEN)return{};for(var r,i,o,a={},s=r$(e.tagName),u=e.ownerDocument,l=0;l<e.attributes.length;l+=1){var c=e.attributes.item(l).name,f=rZ(e,t,c,n.configuration);null!==f&&(a[c]=f)}if(e.value&&("textarea"===s||"select"===s||"option"===s||"input"===s)){var d=rG(e,t);void 0!==d&&(a.value=d)}if("option"===s&&t===rR.ALLOW&&e.selected&&(a.selected=e.selected),"link"===s){var p=Array.from(u.styleSheets).find(function(t){return t.href===e.href}),m=rY(p);m&&p&&!tc(h.DISABLE_REPLAY_INLINE_CSS)&&(a._cssText=m)}if("style"===s&&e.sheet){var m=rY(e.sheet);m&&(a._cssText=m)}"input"===s&&("radio"===e.type||"checkbox"===e.type)&&(t===rR.ALLOW?a.checked=!!e.checked:rj(e,t)&&delete a.checked),("audio"===s||"video"===s)&&(a.rr_mediaState=e.paused?"paused":"played");var g=n.serializationContext;switch(g.status){case 0:i=Math.round(e.scrollTop),o=Math.round(e.scrollLeft),(i||o)&&g.elementsScrollPositions.set(e,{scrollTop:i,scrollLeft:o});break;case 1:g.elementsScrollPositions.has(e)&&(i=(r=g.elementsScrollPositions.get(e)).scrollTop,o=r.scrollLeft)}return o&&(a.rr_scrollLeft=o),i&&(a.rr_scrollTop=i),a}(e,o,t),c=[];return(e.childNodes.length>0||t6(e))&&"style"!==r&&(c=r5(e,t.parentNodePrivacyLevel===o&&t.ignoreWhiteSpace===("head"===r)?t:J({},t,{parentNodePrivacyLevel:o,ignoreWhiteSpace:"head"===r}))),{type:rT.Element,tagName:r,attributes:l,childNodes:c,isSVG:i}}}(e,t);case e.TEXT_NODE:return function(e,t){var n=rB(e,t.ignoreWhiteSpace||!1,t.parentNodePrivacyLevel);if(void 0!==n)return{type:rT.Text,textContent:n}}(e,t);case e.CDATA_SECTION_NODE:return{type:rT.CDATA,textContent:""}}}(e,t);if(!n)return null;var r=rH(e)||r0++;return n.id=r,rU.set(e,r),t.serializedNodeIds&&t.serializedNodeIds.add(r),n}var r0=1;function r5(e,t){var n=[];return ne(e,function(e){var r=r1(e,t);r&&n.push(r)}),n}function r9(e){return!!e.changedTouches}function r2(e){return!0===e.composed&&t6(e.target)?e.composedPath()[0]:e.target}var r4=function(e,t){var n=window.visualViewport,r={layoutViewportX:e,layoutViewportY:t,visualViewportX:e,visualViewportY:t};return n&&(Math.abs(n.pageTop-n.offsetTop-window.scrollY)>25||Math.abs(n.pageLeft-n.offsetLeft-window.scrollX)>25?(r.layoutViewportX=Math.round(e+n.offsetLeft),r.layoutViewportY=Math.round(t+n.offsetTop)):(r.visualViewportX=Math.round(e-n.offsetLeft),r.visualViewportY=Math.round(t-n.offsetTop))),r},r8=function(e){return{scale:e.scale,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,pageLeft:e.pageLeft,pageTop:e.pageTop,height:e.height,width:e.width}};function r3(e){var t=r9(e)?e.changedTouches[0]:e,n=t.clientX,r=t.clientY;if(window.visualViewport){var i=r4(n,r),o=i.visualViewportX,a=i.visualViewportY;n=o,r=a}if(!Number.isFinite(n)||!Number.isFinite(r)){e.isTrusted&&tW("mouse/touch event without x/y");return}return{x:n,y:r}}var r6=((P={})[p.POINTER_UP]=rC.MouseUp,P[p.MOUSE_DOWN]=rC.MouseDown,P[p.CLICK]=rC.Click,P[p.CONTEXT_MENU]=rC.ContextMenu,P[p.DBL_CLICK]=rC.DblClick,P[p.FOCUS]=rC.Focus,P[p.BLUR]=rC.Blur,P[p.TOUCH_START]=rC.TouchStart,P[p.TOUCH_END]=rC.TouchEnd,P);function r7(e,t,n){void 0===n&&(n=document);var r,i=e.defaultPrivacyLevel,o=new WeakMap,a=n!==document,s=eY(e,n,a?[p.CHANGE]:[p.INPUT,p.CHANGE],function(e){var t=r2(e);(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement)&&l(t)},{capture:!0,passive:!0}).stop;if(a)r=el;else{var u=[ny(HTMLInputElement.prototype,"value",l),ny(HTMLInputElement.prototype,"checked",l),ny(HTMLSelectElement.prototype,"value",l),ny(HTMLTextAreaElement.prototype,"value",l),ny(HTMLSelectElement.prototype,"selectedIndex",l)];r=function(){u.forEach(function(e){return e.stop()})}}return function(){r(),s()};function l(e){var t,n,r,o=rN(e,i);if(o!==rR.HIDDEN){var a=e.type;if("radio"===a||"checkbox"===a){if(rj(e,o))return;r={isChecked:e.checked}}else{var s=rG(e,o);if(void 0===s)return;r={text:s}}c(e,r);var u=e.name;"radio"===a&&u&&e.checked&&(t=document.querySelectorAll('input[type="radio"][name="'.concat(X(u),'"]')),n=function(t){t!==e&&c(t,{isChecked:!1})},Array.prototype.forEach.call(t,n))}}function c(e,n){if(rz(e)){var r=o.get(e);r&&r.text===n.text&&r.isChecked===n.isChecked||(o.set(e,n),t(J({id:rH(e)},n)))}}}function ie(e){for(var t=[],n=e;n.parentRule;){var r=Array.from(n.parentRule.cssRules).indexOf(n);t.unshift(r),n=n.parentRule}if(n.parentStyleSheet){var i=Array.from(n.parentStyleSheet.cssRules).indexOf(n);return t.unshift(i),t}}function it(e,t,n,r){var i=tY();if(!i)return{stop:el,flush:el};var o=function(e){var t=el,n=[];function r(){t(),e(n),n=[]}return{addMutations:function(e){0===n.length&&(t=function(e,t){if(window.requestIdleCallback&&window.cancelIdleCallback){var n=window.requestIdleCallback(G(e),t);return function(){return window.cancelIdleCallback(n)}}var r=window.requestAnimationFrame(G(e));return function(){return window.cancelAnimationFrame(r)}}(r,{timeout:100})),n.push.apply(n,e)},flush:r,stop:function(){t()}}}(function(r){!function(e,t,n,r){e.filter(function(e){return"childList"===e.type}).forEach(function(e){e.removedNodes.forEach(function(e){!function e(t,n){t6(t)&&n(t.shadowRoot),ne(t,function(t){return e(t,n)})}(e,r.removeShadowRoot)})});var i=e.filter(function(e){return e.target.isConnected&&function(e){for(var t=e;t;){if(!rz(t)&&!t7(t))return!1;t=nt(t)}return!0}(e.target)&&rN(e.target,n.defaultPrivacyLevel)!==rR.HIDDEN}),o=function(e,t,n){for(var r=new Set,i=new Map,o=function(e){e.addedNodes.forEach(function(e){r.add(e)}),e.removedNodes.forEach(function(t){r.has(t)||i.set(t,e.target),r.delete(t)})},a=0;a<e.length;a++)o(e[a]);var s=Array.from(r);!function(e){e.sort(function(e,t){var n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_CONTAINS?1:n&Node.DOCUMENT_POSITION_FOLLOWING?1:n&Node.DOCUMENT_POSITION_PRECEDING?-1:0})}(s);for(var u=new Set,l=[],c=0;c<s.length;c++){var f=s[c];if(!g(f)){var d=rN(f.parentNode,t.defaultPrivacyLevel);if(d!==rR.HIDDEN&&d!==rR.IGNORE){var p=r1(f,{serializedNodeIds:u,parentNodePrivacyLevel:d,serializationContext:{status:2,shadowRootsController:n},configuration:t});if(p){var h=nt(f);l.push({nextId:function(e){for(var t=e.nextSibling;t;){if(rz(t))return rH(t);t=t.nextSibling}return null}(f),parentId:rH(h),node:p})}}}}var m=[];return i.forEach(function(e,t){rz(t)&&m.push({parentId:rH(e),id:rH(t)})}),{adds:l,removes:m,hasBeenSerialized:g};function g(e){return rz(e)&&u.has(rH(e))}}(i.filter(function(e){return"childList"===e.type}),n,r),a=o.adds,s=o.removes,u=o.hasBeenSerialized,l=function(e,t){for(var n,r=[],i=new Set,o=e.filter(function(e){return!i.has(e.target)&&(i.add(e.target),!0)}),a=0;a<o.length;a++){var s=o[a];if(s.target.textContent!==s.oldValue){var u=rN(nt(s.target),t.defaultPrivacyLevel);u!==rR.HIDDEN&&u!==rR.IGNORE&&r.push({id:rH(s.target),value:null!==(n=rB(s.target,!1,u))&&void 0!==n?n:null})}}return r}(i.filter(function(e){return"characterData"===e.type&&!u(e.target)}),n),c=function(e,t){for(var n=[],r=new Map,i=e.filter(function(e){var t=r.get(e.target);return(null==t||!t.has(e.attributeName))&&(t?t.add(e.attributeName):r.set(e.target,new Set([e.attributeName])),!0)}),o=new Map,a=0;a<i.length;a++){var s=i[a];if(s.target.getAttribute(s.attributeName)!==s.oldValue){var u=rN(s.target,t.defaultPrivacyLevel),l=rZ(s.target,u,s.attributeName,t),c=void 0;if("value"===s.attributeName){var f=rG(s.target,u);if(void 0===f)continue;c=f}else c="string"==typeof l?l:null;var d=o.get(s.target);d||(d={id:rH(s.target),attributes:{}},n.push(d),o.set(s.target,d)),d.attributes[s.attributeName]=c}}return n}(i.filter(function(e){return"attributes"===e.type&&!u(e.target)}),n);(l.length||c.length||s.length||a.length)&&t({adds:a,removes:s,texts:l,attributes:c})}(r.concat(a.takeRecords()),e,t,n)}),a=new i(G(o.addMutations));return a.observe(r,{attributeOldValue:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{stop:function(){a.disconnect(),o.stop()},flush:function(){o.flush()}}}var ir=function(e,t){var n=t.mutationCb,r=t.inputCb,i=new Map,o={addShadowRoot:function(t){if(!i.has(t)){var a=it(n,e,o,t),s=a.stop,u=a.flush,l=r7(e,r,t);i.set(t,{flush:u,stop:function(){s(),l()}})}},removeShadowRoot:function(e){var t=i.get(e);t&&(t.stop(),i.delete(e))},stop:function(){i.forEach(function(e){return(0,e.stop)()})},flush:function(){i.forEach(function(e){return(0,e.flush)()})}};return o};function ii(e){var t;return D||(D=new Map),D.has(e)?t=D.get(e):(t={records_count:0,segments_count:0,segments_total_raw_size:0},D.set(e,t),D.size>10&&function(){if(D){if(D.keys)D.delete(D.keys().next().value);else{var e=!0;D.forEach(function(t,n){e&&(D.delete(n),e=!1)})}}}()),t}var io=function(){function e(e,t,n){this.encoder=e,this.encodedBytesCount=0;var r=t.view.id;this.metadata=J({start:1/0,end:-1/0,creation_reason:n,records_count:0,has_full_snapshot:!1,index_in_view:ii(r).segments_count,source:"browser"},t),ii(r).segments_count+=1}return e.prototype.addRecord=function(e,t){var n,r,i=this;this.metadata.start=Math.min(this.metadata.start,e.timestamp),this.metadata.end=Math.max(this.metadata.end,e.timestamp),this.metadata.records_count+=1,(r=this.metadata).has_full_snapshot||(r.has_full_snapshot=e.type===rk.FullSnapshot),tH("record",{record:e,segment:this.metadata}),n=this.metadata.view.id,ii(n).records_count+=1;var o=this.encoder.isEmpty?'{"records":[':",";this.encoder.write(o+JSON.stringify(e),function(e){i.encodedBytesCount+=e,t(i.encodedBytesCount)})},e.prototype.flush=function(e){var t=this;if(this.encoder.isEmpty)throw Error("Empty segment flushed");this.encoder.write("],".concat(JSON.stringify(this.metadata).slice(1),"\n")),this.encoder.finish(function(n){var r,i;r=t.metadata.view.id,i=n.rawBytesCount,ii(r).segments_total_raw_size+=i,e(t.metadata,n)})},e}();function ia(){return"function"==typeof Array.from&&"function"==typeof CSSSupportsRule&&"function"==typeof URL.createObjectURL&&"forEach"in NodeList.prototype}function is(e,t,n){var r,i=0,o=[],a=0,s=[],u=eZ(e,t,"message",function(e){var t=e.data;if("wrote"===t.type&&t.streamId===n){i+=t.additionalBytesCount,o.push(t.result),r=t.trailer;var a=s.shift();a&&a.id===t.id?a.writeCallback?a.writeCallback(t.result.byteLength):a.finishCallback&&a.finishCallback():(u(),tW("Worker responses received out of order."))}}).stop;function l(){var e=0===o.length?new Uint8Array(0):function(e){for(var t=new Uint8Array(e.reduce(function(e,t){return e+t.length},0)),n=0,r=0;r<e.length;r++){var i=e[r];t.set(i,n),n+=i.length}return t}(o.concat(r)),t={rawBytesCount:i,output:e,outputBytesCount:e.byteLength,encoding:"deflate"};return i=0,o=[],t}function c(){a>0&&(t.postMessage({action:"reset",streamId:n}),a=0)}return{isAsync:!0,get isEmpty(){return 0===a},write:function(e,r){t.postMessage({action:"write",id:a,data:e,streamId:n}),s.push({id:a,writeCallback:r,data:e}),a+=1},finish:function(e){c(),s.length?(s.forEach(function(e){delete e.writeCallback}),s[s.length-1].finishCallback=function(){return e(l())}):e(l())},finishSync:function(){c();var e=s.map(function(e){return delete e.writeCallback,delete e.finishCallback,e.data}).join("");return J(l(),{pendingData:e})},estimateEncodedBytesCount:function(e){return e.length/8},stop:function(){u()}}}function iu(e){return new Worker(e.workerUrl||URL.createObjectURL(new Blob(['!function(){"use strict";function t(t){for(var e=t.reduce((function(t,e){return t+e.length}),0),a=new Uint8Array(e),n=0,r=0,i=t;r<i.length;r++){var s=i[r];a.set(s,n),n+=s.length}return a}function e(t){for(var e=t.length;--e>=0;)t[e]=0}var a=256,n=286,r=30,i=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),l=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Array(576);e(o);var d=new Array(60);e(d);var u=new Array(512);e(u);var f=new Array(256);e(f);var c=new Array(29);e(c);var p,g,w,v=new Array(r);function b(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(v);var y=function(t){return t<256?u[t]:u[256+(t>>>7)]},k=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},z=function(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,k(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},x=function(t,e,a){z(t,a[2*e],a[2*e+1])},A=function(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},E=function(t,e,a){var n,r,s=new Array(16),_=0;for(n=1;n<=i;n++)s[n]=_=_+a[n-1]<<1;for(r=0;r<=e;r++){var h=t[2*r+1];0!==h&&(t[2*r]=A(s[h]++,h))}},Z=function(t){var e;for(e=0;e<n;e++)t.dyn_ltree[2*e]=0;for(e=0;e<r;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},U=function(t){t.bi_valid>8?k(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},S=function(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===t[i]&&n[e]<=n[a]},R=function(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&S(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!S(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n},L=function(t,e,n){var r,i,h,l,o=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===r?x(t,i,e):(h=f[i],x(t,h+a+1,e),0!==(l=s[h])&&(i-=c[h],z(t,i,l)),r--,h=y(r),x(t,h,n),0!==(l=_[h])&&(r-=v[h],z(t,r,l)))}while(o<t.last_lit);x(t,256,e)},F=function(t,e){var a,n,r,s=e.dyn_tree,_=e.stat_desc.static_tree,h=e.stat_desc.has_stree,l=e.stat_desc.elems,o=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<l;a++)0!==s[2*a]?(t.heap[++t.heap_len]=o=a,t.depth[a]=0):s[2*a+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=o<2?++o:0)]=1,t.depth[r]=0,t.opt_len--,h&&(t.static_len-=_[2*r+1]);for(e.max_code=o,a=t.heap_len>>1;a>=1;a--)R(t,s,a);r=l;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],R(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,s[2*r]=s[2*a]+s[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,s[2*a+1]=s[2*n+1]=r,t.heap[1]=r++,R(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,r,s,_,h,l=e.dyn_tree,o=e.max_code,d=e.stat_desc.static_tree,u=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(s=0;s<=i;s++)t.bl_count[s]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)(s=l[2*l[2*(n=t.heap[a])+1]+1]+1)>p&&(s=p,g++),l[2*n+1]=s,n>o||(t.bl_count[s]++,_=0,n>=c&&(_=f[n-c]),h=l[2*n],t.opt_len+=h*(s+_),u&&(t.static_len+=h*(d[2*n+1]+_)));if(0!==g){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(s=p;0!==s;s--)for(n=t.bl_count[s];0!==n;)(r=t.heap[--a])>o||(l[2*r+1]!==s&&(t.opt_len+=(s-l[2*r+1])*l[2*r],l[2*r+1]=s),n--)}}(t,e),E(s,o,t.bl_count)},T=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)r=s,s=e[2*(n+1)+1],++_<h&&r===s||(_<l?t.bl_tree[2*r]+=_:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):_<=10?t.bl_tree[34]++:t.bl_tree[36]++,_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4))},I=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),n=0;n<=a;n++)if(r=s,s=e[2*(n+1)+1],!(++_<h&&r===s)){if(_<l)do{x(t,r,t.bl_tree)}while(0!=--_);else 0!==r?(r!==i&&(x(t,r,t.bl_tree),_--),x(t,16,t.bl_tree),z(t,_-3,2)):_<=10?(x(t,17,t.bl_tree),z(t,_-3,3)):(x(t,18,t.bl_tree),z(t,_-11,7));_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4)}},N=!1,O=function(t,e,a,n){z(t,0+(n?1:0),3),function(t,e,a,n){U(t),n&&(k(t,a),k(t,~a)),t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a}(t,e,a,!0)},D=function(t,e,n,r){var i,s,_=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),F(t,t.l_desc),F(t,t.d_desc),_=function(t){var e;for(T(t,t.dyn_ltree,t.l_desc.max_code),T(t,t.dyn_dtree,t.d_desc.max_code),F(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?O(t,e,n,r):4===t.strategy||s===i?(z(t,2+(r?1:0),3),L(t,o,d)):(z(t,4+(r?1:0),3),function(t,e,a,n){var r;for(z(t,e-257,5),z(t,a-1,5),z(t,n-4,4),r=0;r<n;r++)z(t,t.bl_tree[2*l[r]+1],3);I(t,t.dyn_ltree,e-1),I(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,_+1),L(t,t.dyn_ltree,t.dyn_dtree)),Z(t),r&&U(t)},B={_tr_init:function(t){N||(!function(){var t,e,a,l,m,y=new Array(16);for(a=0,l=0;l<28;l++)for(c[l]=a,t=0;t<1<<s[l];t++)f[a++]=l;for(f[a-1]=l,m=0,l=0;l<16;l++)for(v[l]=m,t=0;t<1<<_[l];t++)u[m++]=l;for(m>>=7;l<r;l++)for(v[l]=m<<7,t=0;t<1<<_[l]-7;t++)u[256+m++]=l;for(e=0;e<=i;e++)y[e]=0;for(t=0;t<=143;)o[2*t+1]=8,t++,y[8]++;for(;t<=255;)o[2*t+1]=9,t++,y[9]++;for(;t<=279;)o[2*t+1]=7,t++,y[7]++;for(;t<=287;)o[2*t+1]=8,t++,y[8]++;for(E(o,287,y),t=0;t<r;t++)d[2*t+1]=5,d[2*t]=A(t,5);p=new b(o,s,257,n,i),g=new b(d,_,0,r,i),w=new b(new Array(0),h,0,19,7)}(),N=!0),t.l_desc=new m(t.dyn_ltree,p),t.d_desc=new m(t.dyn_dtree,g),t.bl_desc=new m(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,Z(t)},_tr_stored_block:O,_tr_flush_block:D,_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(f[n]+a+1)]++,t.dyn_dtree[2*y(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){z(t,2,3),x(t,256,o),function(t){16===t.bi_valid?(k(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},C=function(t,e,a,n){for(var r=65535&t|0,i=t>>>16&65535|0,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{i=i+(r=r+e[n++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16|0},H=new Uint32Array(function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}()),M=function(t,e,a,n){var r=H,i=n+a;t^=-1;for(var s=n;s<i;s++)t=t>>>8^r[255&(t^e[s])];return-1^t},Y={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},K={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},P=B._tr_init,j=B._tr_stored_block,G=B._tr_flush_block,X=B._tr_tally,W=B._tr_align,q=K.Z_NO_FLUSH,J=K.Z_PARTIAL_FLUSH,Q=K.Z_FULL_FLUSH,V=K.Z_FINISH,$=K.Z_BLOCK,tt=K.Z_OK,et=K.Z_STREAM_END,at=K.Z_STREAM_ERROR,nt=K.Z_DATA_ERROR